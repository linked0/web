<html>
<body>
<h2>Solidity</h2>

<a href="https://linked0.github.io/web/solidity.html">solidity.html</a><br>
<a href="https://linked0.github.io/web/know-bak.html">know-bak.html</a><br>
<a href="http://bit.ly/2EluV7n">sites.txt</a><br>
<a href="http://goo.gl/B2Drsz">gdrive 기술문서</a><br>
<a href="http://bit.ly/2HKEsmS">colab aplay</a><br>
<a href="https://github.com/linked0/web/blob/master/know.html">web/know github </a><br>
<a href="http://remix.ethereum.org/">Remix online</a>

<pre>
########################################################
# ToDo
########################################################
# boa-space-contracts conduit 관련 assembly 코드 (#conduit.spec.ts)
- conduit.spec.ts 아래 코드에서 에러남
  it.only("Reverts when attempting to execute transfers on a conduit when not called from a channel", async () => {
    const expectedRevertReason =
      getCustomRevertSelector("ChannelClosed(address)") +
      owner.address.slice(2).padStart(64, "0").toLowerCase();

    const tx = await conduitOne.connect(owner).populateTransaction.execute([]);
    const returnData = await provider.call(tx);
    expect(returnData).to.equal(expectedRevertReason);

    await expect(conduitOne.connect(owner).execute([])).to.be.reverted;
  });

- Conduit.sol
modifier onlyOpenChannel() {
        console.log("onlyOpenChannel");
        // Utilize assembly to access channel storage mapping directly.
        assembly {
            // Write the caller to scratch space.
            mstore(ChannelKey_channel_ptr, caller())

            // Write the storage slot for _channels to scratch space.
            mstore(ChannelKey_slot_ptr, _channels.slot)

            // Derive the position in storage of _channels[msg.sender]
            // and check if the stored value is zero.
            if iszero(
                sload(keccak256(ChannelKey_channel_ptr, ChannelKey_length))
            ) {
                // The caller is not an open channel; revert with
                // ChannelClosed(caller). First, set error signature in memory.
                mstore(ChannelClosed_error_ptr, ChannelClosed_error_signature)

                // Next, set the caller as the argument.
                mstore(ChannelClosed_channel_ptr, caller())

                // Finally, revert, returning full custom error with argument.
                revert(ChannelClosed_error_ptr, ChannelClosed_error_length)
            }
        }

        console.log("onlyOpenChannel return");
        // Continue with function execution.
        _;
    }

########################################################
# Codes
########################################################
# Agora Locanet 실행
- 사용자 root 폴더에 git@github.com:bosagora/agoranet.git 소스 다운로드(clone)
- cd ~/agoranet/michal/
- docker 실행
- cmd/el/init_node 1 실행
	- sudo가 들어가 있어서 개인 PC 암호가 필요함.
- cmd/el/run_node 1
	- LOCALNET_URL=http://127.0.0.1:8545
· chain id: 34559
· Admin에 돈을 넣어주기
	- 방법: 돈을 이미 가지고 있는 키를 주신다고 함.
	- 0xb16ae920b229e39555024802925f663071625a998cb1c0ecf88878841fa748e6
· CommonsBudget 배포
· config/el/genesis_bosagora.json에 다음과 값 세팅
	- bosagoraBlock: 커먼스 버짓 발행의 시작될 블럭, 배포된 블럭의 20~30개 이후 적당.
	- commonsBudget: 배포된 CommonsBudget Address

# Subgraph 개발시 걸린 시간: 딱 10일
개요: 문서 파악이 3일, 테스트가 4일, 실제 개발: 3일
Post Mortem
  - 문서에 대한 좀 더 꼼꼼한 분석이 필요 했음. 
  - chatGPT로 인해서 개발기간이 1/3로 단축됨

1. 목/금/화(2/9~10, 2/14): Graph 구조 파악
2. 수(2/15): 실제 실행 관련 자료 조사
3. 목/금(2/16~17): Goerli/local 노드에서 예제 돌려보기
4. 월(20): 테스트넷 예제 컨트랙트 테스트
5. 화/수(21~22): ERC1155/ERC721/AssetContract에 대한 테스트 완료
6. 목(23): 테스트넷에서 스키마 및 매핑 1차 개발 완료

# hardhat 프로젝트 개발시 참고
- https://hardhat.org/migrate-from-waffle

# 개념
- const receipt = await (await tx).wait();
	§ tx는 sendTransaction()에서 리턴한 Promise이다.

# Solidity version
· 가장 확실한 형태
  ○ pragma solidity >=0.8.0 <=0.8.10;
· pragma solidity ^0.5.2;
  ○ 0.5.2 이전 버전 컴파일러로는 컴파일 안됨
  ○ 0.6.0 으로 시작되는 버전에는 컴파일 암됨 (^가 그런 의미임)

# harthat 프로젝트 만들기
In our case we created the folder named ProjetoLivroNFTERC1155OZ. 
1) Start npm in standard mode.
  npm init -y 
2) Install the hardhat.
  npm install --save-dev hardhat 
  yarn add --dev hardhat <== yarn으로 인스톨할 경우.
3) Install OpenZeppelin smart contracts.
  npm install @openzeppelin/contracts 
4) Install required modules and dependencies. 
  npm install --save-dev @nomiclabs/hardhat-waffle npm install --save-dev "@nomiclabs/hardhat-ethers@^2.0.0" "ethereum- waffle@^3.4.0" "ethers@^5.0.0" 
5) Install the dotenv module.
  npm install dotenv 
6) Start the hardhat.
  npx hardhat

# delegatecall 관하여
<a href="https://medium.com/coinmonks/delegatecall-calling-another-contract-function-in-solidity-b579f804178c">Medium delegatecall</a>
<a href="https://kristaps.me/blog/solidity-delegatecall-proxy-pattern/">Preventing Vulnerabilities in Solidity - Delegate Call</a>
<a href="https://ethereum.stackexchange.com/questions/90917/delegate-call-msg-sender-wrong-value">Stackexchange</a>
<a href="https://docs.soliditylang.org/en/v0.8.17/internals/layout_in_storage.html">Solidity storage</a>
<a href="https://betterprogramming.pub/all-about-solidity-data-locations-part-i-storage-e50604bfc1ad">Storage slot in Inheritance</a>


pragma solidity ^0.8.0;
import "hardhat/console.sol";

contract Executor {
  uint256 public luckyNumber;
  address public sender;
  uint256 public value;

  function setLuckyNumber(uint256 _luckyNumber) public payable {
    luckyNumber = _luckyNumber;
    sender = msg.sender;
    value = msg.value;
  }

  function showNumber() public {
    console.log("luckeyNumber:", luckyNumber);
  }
}

// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;
import "hardhat/console.sol";
contract Caller {
  function setLuckyNumber(address executor, uint256 _luckyNumber) public payable {
    (bool success, bytes memory data) = executor.delegatecall(
      abi.encodeWithSignature("setLuckyNumber(uint256)", _luckyNumber)
    );
  }
  function showNumber(address executor) public {
    (bool success, bytes memory data) = executor.delegatecall(
      abi.encodeWithSignature("showNumber()")
    );
  }
}

# static call
staticcall works in a similar way as a normal call (without any value (sending eth) as this would change state). But when staticcall is used, the EVM has a STATIC flag set to true. Then, if any state modification is attempted, an exception is thrown. Once the staticcall returns, the flag is turned off.

# npm publish, NPM module 배포, 모듈 배포
1. 본인의 npm node 프로젝트 루트 폴더를 들어가서 "npm login" 명령 실행
2. NPM 페이지에서 로그인 진행, Google Authenticator 필요
3. 다시 프로젝트 루트 폴더에서 "npm publish" 명령 실행
4. NPM 페이지에서 배포 진행, Google Authenticator 필요

# Transaction의 형태
transaction: {
  hash: '0x4508d350b89655c9452d527ff1b3d307ed566228661b0a805567561ebc7590f1',
  type: 2,
  accessList: [],
  blockHash: '0xb0f9792fbe40b2b9c85fbdabb90e7f0e4ee08f82f9f82ef485814d3002a34c8f',
  blockNumber: 59,
  transactionIndex: 0,
  confirmations: 1,
  from: '0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC',
  gasPrice: BigNumber { value: "1000591199" },
  maxPriorityFeePerGas: BigNumber { value: "1000000000" },
  maxFeePerGas: BigNumber { value: "1001182398" },
  gasLimit: BigNumber { value: "211019" },
  to: '0x09635F643e140090A9A8Dcd712eD6285858ceBef',
  value: BigNumber { value: "0" },
  nonce: 3,
  data: '0xe7acab24000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000005600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000046000000000000000000000000000000000000000000000000000000000000004c0000000000000000000000000f39fd6e51aad88f6f4ce6ab8827279cfffb9226600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000022000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000063be212dffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff3000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ea4da12fc3f3f34300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000006509f2a854ba7441039fce3b959d5badd2ffcfcd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008ac7230489e800000000000000000000000000000000000000000000000000008ac7230489e800000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000300000000000000000000000033c0024ebc7a8989c1ae32988d5402295c8fd42b3c44cdddb6a900fa2b585dd299e03d12fa4293bc000000000000010000000064000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000f39fd6e51aad88f6f4ce6ab8827279cfffb9226600000000000000000000000000000000000000000000000000000000000000010000000000000000000000006509f2a854ba7441039fce3b959d5badd2ffcfcd000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003782dace9d9000000000000000000000000000000000000000000000000000003782dace9d9000000000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c800000000000000000000000000000000000000000000000000000000000000401fb0dfbaf5bce7c5a92402efbcec0e173531b3e3378e7b236a83eda892e6ac0603ef19202e3b2217622f4a881609e592f598fde0d14849af8b0fb024b71de187000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007f688786',
  r: '0xe41292838da7454d5932feef08cb49c12e56721edfab2df873d79abaf35fed26',
  s: '0x2a9cf276597a3559d1784c95234ff0c0805e4b29e846ccbe13e59fb3f0874f2a',
  v: 0,
  creates: null,
  chainId: 1,
  wait: [Function (anonymous)]
}

# sendTransaction - hardhat 테스트 코드
const encodedData = feeCollectorContract.interface.encodeFunctionData(
  "unwrapAndWithdraw",
  [
    feeAdmin.address.toString(),
    wboaContract.address,
    BigNumber.from("10")
  ]
);
const result = await ownerSigner.sendTransaction({
  to: proxyContract.address,
  data: encodedData
});

- 관련 사이트
https://ethereum.stackexchange.com/questions/54845/calling-contract-function-via-web3-eth-sendtransaction-doesnt-work
https://stackoverflow.com/questions/72584559/how-to-test-the-solidity-fallback-function-via-hardhat
https://github.com/ethers-io/ethers.js/issues/478
https://ethereum.stackexchange.com/questions/114146/how-do-i-manually-encode-and-send-transaction-data
https://github.com/ethers-io/ethers.js/issues/3522


# Predicted Address
contract C {
        functioncreateDSalted(bytes32 salt, uint arg) public {
            // This complicated expression just tells you how the address
	// can be pre-computed. It is just there for illustration.
	// You actually only need ``new D{salt: salt}(arg)``.
	address predictedAddress = address(uint160(uint(keccak256(abi.encodePacked(
                bytes1(0xff),
                address(this),
                salt,
                keccak256(abi.encodePacked(
                    type(D).creationCode,
                    abi.encode(arg)
                ))
            )))));

            D d = newD{salt: salt}(arg);
            require(address(d) == predictedAddress);
        }
    }
	}


# 컨트랙트 사이즈
	1. npm install --dev hardhat-contract-sizer
	2. hardhat.config.ts에 다음 라인 추가
		○ import "hardhat-contract-sizer";
	3. npx hardhat size-contracts

# 옛날 방식
solc-select install 0.8.0

truffle-config.js
module.exports = {
  networks: {
    development: {
      host: "127.0.0.1",
      port: 8545,
      network_id: "*" // Match any network id
    }
  },
  compilers: {
    solc: {
      version: "^0.8.0"
    }
  }
};

data = fs.readFileSync('/Users/hyunjaelee/work/commons-budget-contract/build/contracts/VoteraVote.json');
obj = JSON.parse(data);
size = Buffer.byteLength(obj.deployedBytecode) / 2;

# Nonce 오류 관련해서 헨리님이 얘기해준것
private async resetTransactionCount() {
  this.manager_signer.setTransactionCount(await this.manager_signer.getTransactionCount());
}
3:42
nonce-manager.ts
setTransactionCount(transactionCount: ethers.BigNumberish | Promise<ethers.BigNumberish>): void {
  this._initialPromise = Promise.resolve(transactionCount).then((nonce) => {
      return ethers.BigNumber.from(nonce).toNumber();
  });
  this._deltaCount = 0;

########################################################
# Errors
########################################################

1. Error: VM Exception while processing transaction: reverted with panic code 0x11 (Arithmetic operation underflowed or overflowed outside of an unchecked block)
	a. 연산이 음수가 될 때, 찬반표 계산시 발생
2.  Error: cannot estimate gas; transaction may fail or may require manual gas limit (error="Error: VM Exception while processing transaction: reverted with reason string 'E004'", tx={"data":"0x1e28886e3a38e54d9c9b01a63cae0476c624f670359871e7b1463a777cba3247240e31fd76129d005b6f526cbaaf1e1e37494d8091c109bfcf47881a612190af683c1e27000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000412dcb94cce59dd93b63aae7cedc6f7f0b64083b6a29b6f8ce403b2b8f862d8a5a17a797b880310346766ca58d2b9a01b4060b3bfcd7ad02c9aec7da9cd41f77431b00000000000000000000000000000000000000000000000000000000000000","to":{},"from":"0x0e1eE98EDF5BDbc5caaFed491526A0Cd3eD31fad","type":2,"maxFeePerGas":{"type":"BigNumber","hex":"0xa650c80c"},"maxPriorityFeePerGas":{"type":"BigNumber","hex":"0x9502f900"},"nonce":{},"gasLimit":{},"chainId":{}}, code=UNPREDICTABLE_GAS_LIMIT, version=abstract-signer/5.5.0)
3. Error: cannot estimate gas; transaction may fail or may require manual gas limit [ See: https://links.ethers.org/v5-errors-UNPREDICTABLE_GAS_LIMIT ] (error={"reason":"VM Exception while processing transaction: reverted with reason string 'E000'","code":"UNPREDICTABLE_GAS_LIMIT","method":"estimateGas","transaction":{"from":"0x3287f4b4953471234DbeAFf7d2F9EA58dFedD7fd","maxPriorityFeePerGas":{"type":"BigNumber","hex":"0x59682f00"},"maxFeePerGas":{"type":"BigNumber","hex":"0xa80d7dfe"},"to":"0xeEdC2Ac65dF232AB6d229EBD4E3F564e194ffe7D","value":{"type":"BigNumber","hex":"0x056bc75e2d63100000"},
	a. 이코드에서 발생 "IVoteraVote(voteAddress).init("
	b. 이 함수를 CommonsBudget에서 호출되어야하는데, CommonsStorage에서 호출되어서 initVote에서 문제가 발생.
4. AssertionError: Expected transaction to be reverted with E001, but other exception was thrown: RangeError: Maximum call stack size exceeded
	a. typechain 모듈 업그레이드
	b. 이 커밋 참조
5. TypeError: Cannot read property 'eth' of undefined [closed]
	○ 이 코드 실행시 발생
		§ hre.web3.eth.accounts.decrypt(data,"boa2022!@");
	○ 다음 설치 필요
		§ npm install -s web3
		§ npm install -s @nomiclabs/hardhat-web3
	○ hardhat.config.ts에서 다음 추가
		§ import"@nomiclabs/hardhat-web3";
	○ 결국 hardhat과 web3를 연결하는 작업이 필요함.
6. HardhatError: HH103: Account 0x3e29aefa7af16625691a9fca4a7fff0624aabc6f is not managed by the node you are connected to.
	○ hardhat.config.ts의 getAccounts함수에 해당 계좌를 추가해야함.
		§ accounts:[process.env.ADMIN_KEY||"",process.env.VOTE_KEY||"",process.env.USER_KEY||"",process.env.MANAGER_KEY||""],

7. docker: Got permission denied while trying to connect to the Docker daemon socket
	○ 이건 screen에 들어가서 실행해줘야 함.
1.Create the docker group if it does not exist
$ sudo groupadd docker
2.Add your user to the docker group.
$ sudo usermod -aG docker $USER
3.Run the following command or Logout and login again and run (that doesn't work you may need to reboot your machine first)
$ newgrp docker

8. Authority노드를 실행시킬때, block number가 늘어나지 않을때
	○ run_node를 통해서 실행시키면 다음과 같은 내부 IP에 대한 로그가 나와도 문제는 아님.
		○ self=enode://6d59a1ce195d9251e8f5234b3dbd486cf15eeac6cb8199898af3e11b9b7f5c54e334317d1cc3ab8077360383bc08b8aa93299ccb169b55dbea59414847dbce2d@127.0.0.1:30303
	○ run_node 스크립트에 bootnode 항목에 들어가는 enode의 IP값이 맞아야 함.
	○ static_node.json에 enode 정보를 정확히 써줘야 함.
	○ Node1에 외부 IP를 할당했을때 재부팅 필요함.
	○ 싱크하는데 시간이 좀 걸림.
9. Merge pull request #1 from linked0/initial-code
	® 두번째 커밋은 <Hyunjae Lee>이고, 세번째 커밋은 <Jay>로 되어 있음.
10. 이미 임포트된 계정이 있는데 다시 임포트를 하려고할 때 에러가 뜨는데 관련 설명
	• Imported Accounts are accounts you import using a private key string or a private key JSON file, and were not created with the same Secret Recovery Phrase as your wallet and accounts. For this reason, these accounts will not appear automatically when you restore your MetaMask account with your Secret Recovery Phrase. The data associated with your MetaMask Secret Recovery Phrase cannot be added or extended to the imported account.
	
11. An unexpected error occurred:
Error: Cannot find module './IERC165__factory'
• 해결: typechain-types와 artifacts 폴더 삭제
• 상세 내용
Require stack:
- /Users/hyunjaelee/work/commons-budget-contract/typechain-types/factories/@openzeppelin/contracts/utils/introspection/index.ts
- /Users/hyunjaelee/work/commons-budget-contract/typechain-types/factories/@openzeppelin/contracts/utils/index.ts
- /Users/hyunjaelee/work/commons-budget-contract/typechain-types/factories/@openzeppelin/contracts/index.ts
- /Users/hyunjaelee/work/commons-budget-contract/typechain-types/factories/@openzeppelin/index.ts
- /Users/hyunjaelee/work/commons-budget-contract/typechain-types/factories/index.ts
- /Users/hyunjaelee/work/commons-budget-contract/typechain-types/index.ts
- /Users/hyunjaelee/work/commons-budget-contract/test/VoteHelper.ts
- /Users/hyunjaelee/work/commons-budget-contract/test/AdminAction.test.ts
- /Users/hyunjaelee/work/commons-budget-contract/node_modules/hardhat/node_modules/mocha/lib/mocha.js
- /Users/hyunjaelee/work/commons-budget-contract/node_modules/hardhat/node_modules/mocha/index.js
- /Users/hyunjaelee/work/commons-budget-contract/node_modules/hardhat/builtin-tasks/test.js
- /Users/hyunjaelee/work/commons-budget-contract/node_modules/hardhat/internal/core/tasks/builtin-tasks.js
- /Users/hyunjaelee/work/commons-budget-contract/node_modules/hardhat/internal/core/config/config-loading.js
- /Users/hyunjaelee/work/commons-budget-contract/node_modules/hardhat/internal/cli/cli.js
    at Function.Module._resolveFilename (node:internal/modules/cjs/loader:933:15)
    at Function.Module._resolveFilename.sharedData.moduleResolveFilenameHook.installedValue [as _resolveFilename] (/Users/hyunjaelee/work/commons-budget-contract/node_modules/@cspotcode/source-map-support/source-map-support.js:679:30)
    at Function.Module._load (node:internal/modules/cjs/loader:778:27)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/Users/hyunjaelee/work/commons-budget-contract/typechain-types/factories/@openzeppelin/contracts/utils/introspection/index.ts:4:1)
    at Module._compile (node:internal/modules/cjs/loader:1105:14)
    at Module.m._compile (/Users/hyunjaelee/work/commons-budget-contract/node_modules/ts-node/src/index.ts:1459:23)
    at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
    at Object.require.extensions.<computed> [as .ts] (/Users/hyunjaelee/work/commons-budget-contract/node_modules/ts-node/src/index.ts:1462:12) {
  code: 'MODULE_NOT_FOUND',
  requireStack: [
    '/Users/hyunjaelee/work/commons-budget-contract/typechain-types/factories/@openzeppelin/contracts/utils/introspection/index.ts',
    '/Users/hyunjaelee/work/commons-budget-contract/typechain-types/factories/@openzeppelin/contracts/utils/index.ts',
    '/Users/hyunjaelee/work/commons-budget-contract/typechain-types/factories/@openzeppelin/contracts/index.ts',
    '/Users/hyunjaelee/work/commons-budget-contract/typechain-types/factories/@openzeppelin/index.ts',
    '/Users/hyunjaelee/work/commons-budget-contract/typechain-types/factories/index.ts',
    '/Users/hyunjaelee/work/commons-budget-contract/typechain-types/index.ts',
    '/Users/hyunjaelee/work/commons-budget-contract/test/VoteHelper.ts',
    '/Users/hyunjaelee/work/commons-budget-contract/test/AdminAction.test.ts',
    '/Users/hyunjaelee/work/commons-budget-contract/node_modules/hardhat/node_modules/mocha/lib/mocha.js',
    '/Users/hyunjaelee/work/commons-budget-contract/node_modules/hardhat/node_modules/mocha/index.js',
    '/Users/hyunjaelee/work/commons-budget-contract/node_modules/hardhat/builtin-tasks/test.js',
    '/Users/hyunjaelee/work/commons-budget-contract/node_modules/hardhat/internal/core/tasks/builtin-tasks.js',
    '/Users/hyunjaelee/work/commons-budget-contract/node_modules/hardhat/internal/core/config/config-loading.js',
    '/Users/hyunjaelee/work/commons-budget-contract/node_modules/hardhat/internal/cli/cli.js'
  ]
}


12.  Unexpected end of JSON input 에러
* npx hardhat run scripts/deploy.ts --network devnet 실행시 발생
* 해결방법: 그냥 폴더 자체를 지우고, git clone으로 소스를 다시 받음
	- artifacts를 지워도 안되었음.
	- 깨끗한 상태에서 잘되는 걸 보니, 리파지토리와 같이 파일이 정리된 상태이면 잘 될 것 같음.
* 에러 내용
An unexpected error occurred:

SyntaxError: /Users/hyunjaelee/work/commons-budget-contract/artifacts/@openzeppelin/contracts/utils/Context.sol/Context.dbg.json: Unexpected end of JSON input
    at JSON.parse (<anonymous>)
    at /Users/hyunjaelee/work/commons-budget-contract/node_modules/jsonfile/index.js:33:18
    at /Users/hyunjaelee/work/commons-budget-contract/node_modules/graceful-fs/graceful-fs.js:123:16
    at FSReqCallback.readFileAfterClose [as oncomplete] (node:internal/fs/read_file_context:68:3)

13. HardhatError: HH103: Account 0x3e29aefa7af16625691a9fca4a7fff0624aabc6f is not managed by the node you are connected to.
* 발생시점: npx hardhat run scripts/set_owner.ts --network testnet
* 해결: hardhat.config.ts에서만 세팅한 계정만 사용할 수 있음.

14. TypeError: Cannot read properties of undefined (reading 'sourceName')
* 발생시점: `yarn test`로 fulfillOrder 테스트
* 해결: yarn add --dev hardhat@ir
* 에러 상세내용
/Users/hyunjaelee/work/seaport/node_modules/hardhat/internal/hardhat-network/stack-traces/solidity-errors.js:111
    return new SolidityCallSite(sourceReference.sourceName, sourceReference.contract, sourceReference.function !== undefined
                                                ^
TypeError: Cannot read properties of undefined (reading 'sourceName')
(Use `node --trace-uncaught ...` to show where the exception was thrown)
error Command failed with exit code 7.
info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.


15. <UnrecognizedContract>.<unknown> 
	• Seaport 테스트 코드 작성시 문제 생김
	• 테스트코드에서 컨트랙트 함수 호출시 signer로 connect해야하는데 그냥 wallet으로 connect 함
	• Hardhat 네트워크에서 사용할 계정은 hardhat.config.ts의 getAccount함수에서 추가하면 됨.

16. Uncaught ReferenceError: Buffer is not defined
	a. 여기 스텍오버플로우 참조
	import{ Buffer} from'buffer';
	// @ts-ignorewindow.Buffer= Buffer;

17. Error HH700: Artifact for contract "hardhat/console.sol:console" not found. 
  * npx hardhat clean 실행
	
18. TestNet에서 Contract 배포시 UND_ERR_CONNECT_TIMEOUT이 발생
  * 다음과 같이 처리됨
  * RPC를 다른 노드에 붙임
  * 문제가 생긴 노드를 트랜잭션 풀을 날려버림

19. TestNet에서 Contract 배포 스크립트 실행시 다음 프롬프트로 안 떨어지고 먹통]
  * Nonce값이 꼬여서 그렇게 됨
  * Nonce값이 꼬인 이유는 내 개인 프로젝트인 web2/nft-market에서 NonceManager를 사용하지 않아서 생긴 문제
  * 일단 문제가 생긴 계정(즉 Contract를 배포하던 주소)에서 네이티브 토큰을 보내기 몇번하면 됨.

</pre></body></html>
