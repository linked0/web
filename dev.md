
🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※
- [IDE](#ide)
  - [Mac Setting](#mac-setting)
  - [VSCode 단축키](#vscode-단축키)
  - [iterm2 단축키](#iterm2-단축키)
  - [Command](#command)
  - [Screen](#screen)
  - [Finder](#finder)
- [ChatGPT-Bard-Google](#chatgpt-bard-google)
  - [패키지 상세 정보가 필요할때](#패키지-상세-정보가-필요할때)
  - [에러가 날때 이런식으로 물어보면 됨](#에러가-날때-이런식으로-물어보면-됨)
- [Workspace](#workspace)
- [Blockchain](#blockchain)
  - [localnet 실행하기](#localnet-실행하기)
  - [clique in genesis.json](#clique-in-genesisjson)
  - [BOA 유통량 API](#boa-유통량-api)
- [Dev Settings](#dev-settings)
  - [Node workspaces](#node-workspaces)
  - [TypsScript/Nodejs](#typsscriptnodejs)
  - [Hardhat / solidity](#hardhat--solidity)
  - [Docker](#docker)
  - [NPM](#npm)
  - [Python](#python)
  - [Rust](#rust)
  - [Prettier 적용](#prettier-적용)
- [Project](#project)
  - [poohnet (EL/CL)](#poohnet-elcl)
  - [zksync](#zksync)
  - [Foundry](#foundry)
- [NodeJS/TypeScript](#nodejstypescript)
  - [Event 인자들중 하나만 체크](#event-인자들중-하나만-체크)
  - [anyValue function](#anyvalue-function)
  - [an issue with fsevents](#an-issue-with-fsevents)
  - [로컬 링크 만들기](#로컬-링크-만들기)
  - [NPM publish 에러](#npm-publish-에러)
- [Smart Contract/Hardhat](#smart-contracthardhat)
  - [Hardhat config defaultNetwork](#hardhat-config-defaultnetwork)
  - [create2 함수](#create2-함수)
  - [트랜잭션 취소하는 방법](#트랜잭션-취소하는-방법)
  - [Nonce 얻어내기](#nonce-얻어내기)
  - [Type error: Cannot find module '../typechain-types' or its corresponding type declarations.](#type-error-cannot-find-module-typechain-types-or-its-corresponding-type-declarations)
  - [Error: network does not support ENS](#error-network-does-not-support-ens)
  - [L1-governance 배포 에러](#l1-governance-배포-에러)
  - [wait 함수의 인자](#wait-함수의-인자)
  - [Contract Size](#contract-size)
  - [Exceeds Gas Limit 에러](#exceeds-gas-limit-에러)
  - [hardhat-gas-reporter](#hardhat-gas-reporter)
- [Github](#github)
  - [github 계정 꼬였을때](#github-계정-꼬였을때)
  - [error: cannot run delta: No such file or directory](#error-cannot-run-delta-no-such-file-or-directory)
  - [git submodule update 에러 발생시](#git-submodule-update-에러-발생시)
  - [내가 올린 브랜치에 대해서 자동으로 PR추천을 할수 있도록 하기.](#내가-올린-브랜치에-대해서-자동으로-pr추천을-할수-있도록-하기)
  - [Merge pull request 발생하지 않도록 Full Requests 설정](#merge-pull-request-발생하지-않도록-full-requests-설정)
  - [기타 정리](#기타-정리)
- [Dev Errors](#dev-errors)
  - [failed to compute cache key: "/target/debug/zksync\_server" not found: not found](#failed-to-compute-cache-key-targetdebugzksync_server-not-found-not-found)
- [Mac](#mac)
  - [MacVim을 Spotlight에서 보도록 하기](#macvim을-spotlight에서-보도록-하기)
  - [Mac Spotlight에서 특정 애플리케이션 찾지 못할 때](#mac-spotlight에서-특정-애플리케이션-찾지-못할-때)
  - [Mac에서 Sublime Text를 커맨트창에서 실행시키기](#mac에서-sublime-text를-커맨트창에서-실행시키기)
- [vi](#vi)
  - [files 파일 만들기](#files-파일-만들기)
  - [basics](#basics)
  - [Move cursor to end of file in vim](#move-cursor-to-end-of-file-in-vim)
  - [한글 깨지는 문제](#한글-깨지는-문제)
  - [vimrc (~/.vimrc)](#vimrc-vimrc)
- [AWS](#aws)
  - [AWS 가격표](#aws-가격표)
  - [AWS에 Load Balancer 추가시](#aws에-load-balancer-추가시)
  - [node3에 들어가서 postgresql 도커 접속방법](#node3에-들어가서-postgresql-도커-접속방법)
  - [WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!](#warning-remote-host-identification-has-changed)
  - [public key 확인 및 깃헙에 추가하기](#public-key-확인-및-깃헙에-추가하기)
  - [접속](#접속)
  - [AWS에서 파일 전송](#aws에서-파일-전송)
  - [Load Balancer](#load-balancer)
  - [URL로 접근이 안되는 문제](#url로-접근이-안되는-문제)
  - [Target Group](#target-group)
  - [AWS 타임존 변경](#aws-타임존-변경)
- [Know](#know)
  - [Memo Google Docs](#memo-google-docs)
  - [예상치 못한 컴파일 에러가 나올때](#예상치-못한-컴파일-에러가-나올때)
  - [Generate Private Key](#generate-private-key)
  - [Mac XCode](#mac-xcode)
  - [source를 다른 위치에 new\_source라는 이름으로 복사(두가지 방법)](#source를-다른-위치에-new_source라는-이름으로-복사두가지-방법)
  - [텍스트 찾기](#텍스트-찾기)
- [자주 사용](#자주-사용)
  - [명령어 하나로 git commit과 push](#명령어-하나로-git-commit과-push)
  - [.bash\_profile](#bash_profile)
  - [git submodule](#git-submodule)
  - [tar](#tar)

## IDE
🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※
### Mac Setting
😈 1) .ssh 복사
iCloud/pooh/ssh.tar
😈 2) brew/zsh/iterm2/karabiner install
```
xcode-select —-install | /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
brew install --cask iterm2 | brew install zsh | brew install karabiner-elements
sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
```

echo $SHELL <== 이걸로 쉘 확인

karabiner는 option+hjkl가 디폴트로 있음.

😈 3) npm yarn docker install
```
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash
npm install -g yarn
brew install cask docker
brew install cask docker-compose
```
😈 nvm install
```
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.34.0/install.sh | bash
source ~/.nvm/nvm.sh
```

https://www.docker.com/products/docker-desktop/ 도커 Desktop (linked0/**)

😈 4) rust/postgresql install
```
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
cargo install sqlx-cli
```
```
brew update
brew install postgresql
brew services start postgresql
```
psql postgres <== 접속해볼 수 있음.

😈 5) Whale, Miro, onenote, Visual Studio
Command Palette 를 열어줍니다. [⇧⌘P ] Shell command

😈 6) 기타
- Markdown All in One: 마크다운 컨텐트 만들어주는 VSCode 플러그인
- 노트북 첫번째 데스크탑에는 web 프로젝트
- 마지막 데스크탑은 타이핑, 킨들, 교보문고 앱 띄워놓기 
- 아이패드 & OneNote 회의 필기

---
###  VSCode 단축키
- Command Palette 를 열어줍니다. [⇧⌘P ] Shell command
- back: ctrl - , forward: shift ctrl -
- ctrl tab: recent files
- shift cmd n - cmd shift /: open project
- ctrl `: goto terminal
- Cmd+Shift+]: Move to previous terminal
- Cmd+shift+[: Move to next terminal
- ctrl shift ₩ : new terminal

- Bigger Font: cmd + "+"

---
### iterm2 단축키
- Next split: cmd + ]

---
### Command
egrep -irnH --include=\*.cpp --exclude-dir=.svn 'beacon.pntbiz.com' ./
tar --exclude='node_modules' -cvzf bccard.tar.gz bccard
tar -xvzf xxx.tar.gz -C ./data

여러 sub directory에 node_modules를 제거함.
tar --exclude='*/node_modules' --exclude='.git' -cvzf ~/temp/pooh-tools.tar.gz .
opt cmd b - Bookmark

ssh-keygen -t rsa

brew install golang
`PATH=$PATH:$HOME/go/bin`

go install github.com/protolambda/zcli@latest
zcli --help
alias nd1="ssh -i ~/pooh/tednet.pem ubuntu@13.209.149.243"

하위 동일 폴더 지우기
find . -type d -name 'temp' -exec rm -rf {} +

---
### Screen
screen -X -S session_id quit
- ctrl a+d // exit
- screen -S el -X quit
- screen -r -d 17288 <-- attatch되어 있는 것 detach

---
### Finder
= hidden files: Command + Shift + . (period key)

------
🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※
## ChatGPT-Bard-Google

---
### 패키지 상세 정보가 필요할때
Where can I find the details of the "ethers" package?

---
### 에러가 날때 이런식으로 물어보면 됨
The error outputs from the line "const utils_1 = require('ethers/utils');" :
 at Function.Module._resolveFilename (node:internal/modules/cjs/loader:1028:15) at Function.Module._load (node:internal/modules/cjs/loader:873:27) at Module.require (node:internal/modules/cjs/loader:1100:19)     at require (node:internal/modules/cjs/helpers:119:18)     at Object.<anonymous> (/Users/hyunjaelee/work/pooh-swap-contracts/test/shared/utilities.js:40:17)     at Module._compile (node:internal/modules/cjs/loader:1198:14)     at Object.Module._extensions..js (node:internal/modules/cjs/loader:1252:10)     at Module.load (node:internal/modules/cjs/loader:1076:32)     at Function.Module._load (node:internal/modules/cjs/loader:911:12)     at Module.require (node:internal/modules/cjs/loader:1100:19) {   code: 'MODULE_NOT_FOUND',

------
## Workspace
🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※

😈 github subscribe
```
/github subscribe  bosagora/boa-space-contracts issues pulls commits releases deployments reviews comments
```

```
/github subscribe zeroone-boa/validators reviews comments
```
이것도 방법, 위의 것과 비교 필요: 
```
/github subscribe bosagora/boa-space-seaport-js issues pulls commits releases deployments reviews comments
```

😈 Calendar 추가(Dev Team)
😈 스타일가이드: https://github.com/bpfkorea/agora/blob/v0.x.x/doc/Style.md, 상세한 설명 필요


--------
## Blockchain
🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※
### localnet 실행하기
npx hardhat node

---
### clique in genesis.json
```json
{
  "config": {
    "chainId": 12301,
    "homesteadBlock": 0,
    "eip150Block": 0,
    "eip155Block": 0,
    "eip158Block": 0,
    "byzantiumBlock": 0,
    "constantinopleBlock": 0,
    "petersburgBlock": 0,
    "istanbulBlock": 0,
    "berlinBlock": 0,
    "londonBlock": 0,
    "arrowglacierBlock": 0,
    "clique": {
      "period": 1,
      "epoch": 30000
    }
  },
  ...
}
```
- "period":
This refers to the block time, the time interval between consecutive blocks. In this case, 1 means one second. This is a very fast block time, suitable for private or test networks where quick consensus is desired. In public networks, such short intervals could lead to network instability due to propagation delays and increased likelihood of forks.

- "epoch":
The epoch length, set here as 30000, is significant in Clique PoA. An epoch is a period after which the list of authorized signers can be updated. In Clique, every epoch blocks, a special block called the epoch transition block is generated, which contains the list of authorized signers for the next epoch. The number 30000 means that every 30,000 blocks, the network has an opportunity to update the list of signers.

---
### BOA 유통량 API
- 유통량: https://api.bosplatformfoundation.io/boa_circulating_supply
- 총발행량: https://api.bosplatformfoundation.io/boa_supply

--------
## Dev Settings
🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※


---
### Node workspaces
😈 Structure and Configuration
- Workspace Root: A single workspace has a root directory, usually with a package.json file that includes a workspaces field.
- Sub-packages: Inside the root, there are subdirectories for each workspace, each with its own package.json file.
- Shared Configuration: Dependencies and scripts can be shared across workspaces, which is especially useful for common configurations and shared libraries.

😈 Reference Project
- [poohgithub zksync-era](https://github.com/poohgithub/zksync-era)
- [mater-labs pymaster-examples](https://github.com/matter-labs/paymaster-examples)

---
### TypsScript/Nodejs

😈 NodeJs 프로젝트
- npm init -y
- touch index.js

😈 TypeScript 프로젝트
- npm install -g typescript
- npm init -y
- npx tsc --init
- package.json --> CoPilot이 다 해줌
 "build": "tsc",
  "start": "node dist/index.js"
- tsconfig.json
  "outDir": "./dist",
  "include": ["./scripts", "./test", "./typechain"],
  "files": ["./hardhat.config.ts"]
- mkdir src
- touch src/index.ts
- yarn build
- yarn start

😈 yarn
yarn add --dev 

---
### Hardhat / solidity
Hardhat은 기존 프로젝트에서는 안됨.
yarn init -y (=npm init -y)
yarn add --dev hardhat
npx hardhat

yarn add @openzeppelin/contracts

아래 두개는 같이 쓰면 안됨.
import "@nomicfoundation/hardhat-toolbox";
import "@nomiclabs/hardhat-waffle"; // 이것만써.

yarn add dotenv
alchemy keyless 설명에 alchemy web3 설치방법.

yarn hardhat node (chain id: 31337)
yarn hardhat run ./scripts/send-raw-tx.ts --network hardhat

--------
😈 solidiy
import "hardhat/console.sol";
npx hardhat compile

const tx = await factoryInstance.setFeeTo(process.env.FEE_TO);
const receipt = await (await tx).wait();

---
### Docker

😈 Docker Image 만들기
1. https://github.com/poohgithub/poohgeth/blob/master/Dockerfile 참고
2. docker build -t poohgeth .
3. docker 실행 (optional)
docker run -p 3000:3000 my-app-image
4. docker login
5. tag
   docker tag local-image-name linked/poohnet-pow:v1.0
6. push
   docker push linked/poohnet-pow:v1.0
7. pull 
   docker pull linked/poohnet-pow:v1.0
8. run using docker-compose
https://github.com/poohgithub/poohgeth/blob/master/poohnet/docker-compose-node.yml 참조
docker compose -f docker-compose-node.yml up el1 -d


😈 기타
- docker attach

- docker ps | grep 5432

- 파일의 권한도 github으로 등록된다. run_node 실행권한

- To restore the entire staging area to the HEAD commit, you can run the following command:
git restore --staged .

- 수호는 블록체인 생태계를 활성화하고 연결하기 위하여 Bridge, DEX와 같은 Dapp 프로덕트를 개발하고 있습니다.

---
### NPM
npm login
npm publish --access public

---
### Python
😈 venv 설정하고 간단한 프로그램 실행
python -m venv venv
source venv/bin/activate
code script.py

```
def hello_world():
    print("Hello World")

if __name__ == "__main__":
    hello_world()
```

python script.py

pip install requests
pip freeze > requirements.txt
pip install -r requirements.txt

다 끝나면 deactivate

😈 머신에 설치하기 
pip3 install -r requirements.txt
python3 setup.py install

```
from setuptools import find_packages, setup
setup(
    name="staking_deposit",
    version='2.5.2',
    py_modules=["staking_deposit"],
    packages=find_packages(exclude=('tests', 'docs')),
    python_requires=">=3.8,<4",
)
```
설치하면 아래의 위치에 설치됨
```
/Library/Python/3.9/site-packages/staking_deposit-2.5.4-py3.9.egg
```
설치 하고 나면 아래 쉘스크립트 실행 가능
https://github.com/poohgithub/poohprysm/blob/develop/poohnet/pooh-deposit-cli/deposit.sh

😈 colab
import matplotlib.pyplot as plt

😈 VS Code
- Open the Command Palette (⇧⌘P), start typing the Python: Create Environment
- 다른 프로젝트(예: poohcode)의 하위 프로젝트라면 .venv 폴더 복사
- source ./venv/bin/activate
- 수동으로 하는 방법: python3 -m venv venv39
- pip3 freeze > requirements.txt <== venv를 빠져나오고 해야함.
- python hello.py

---
### Rust
Homebrew rust와 rustup로 설치된 것과 연동안됨. 따라서 아래와 같이 지우기
brew uninstall rust

그리고 rustc 이용
rustup install nightly-2023-07-21
rustup default nightly-2023-07-21

---
### Prettier 적용
package.json의 "scripts" 섹션에 다음을 추가
```
"prettier": "node_modules/.bin/prettier --write --config .prettierrc 'contracts/**/*.sol' 'test/**/*.ts' 'utils/**/*.ts' 'scripts/**/*.ts'",
```

--------

## Project
🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※
### poohnet (EL/CL)
😈 geth compile
brew install golang
go run build/ci.go install -static ./cmd/geth or make geth
sudo cp ./build/bin/geth /usr/local/bin/geth

😈 EL
- ./init local 1 & ./enode pow el1
- ./init pow 1 & ./enode pow el1
- ./init pow 2 & ./enode pow el2

😈 CL
1. 블럭해시과 genesis time(date +%s)을 chain-config 반영하고 eth2-testnet-genesis 실행
    - gen_genesis
    - zcli pretty bellatrix  BeaconState genesis.ssz > parsedState.json로 Validators Root 가져오기
    - settings.py에 GENESIS_VALIDATORS_ROOT에 추가, 근데 이건 거의 안 바뀜.
2. staking-deposit-cli로 wallet 만들기
    - sudo ./deposit.sh install, 만약 longinterpr.h 에러 발생하면 아래 실행
        - python3.10 -m venv py310
        - source py310/bin/activate
    - ./deposit.sh existing-mnemonic
3. 첫번째 cnode 실행하고 enr 알아내서 bootstrap-node
    - cl은 el과 연동되므로 init할 필요 없음
    - poohprysm 루트폴더의 cnode로 실행.
4. 나머지 cl 실행시키기
5. keys &validators 실행
    - poohprysm 루트폴더에서 찾아야 함.
  
---
### zksync
local-setup에서 clear-sql.sh와 start-sql.sh
localentry.sh 실행
greeter-example에서 deploy-test와 greet-test진행

---
### Foundry

-------
## NodeJS/TypeScript
🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※

---
### Event 인자들중 하나만 체크
```
await expect(lock.withdraw())
    .to.emit(lock, "Withdrawal")
    .withArgs(lockedAmount, anyValue);
```
위 코드를 아래와 같이 변경. anyValue가 제대로 동작 안함.
```
const tx = await lock.withdraw();
const receipt = await tx.wait();
// Find the Withdrawal event in the transaction receipt
const withdrawalEvent = receipt.events.find((e: any) => e.event === "Withdrawal");

// Check if the Withdrawal event was emitted
expect(withdrawalEvent, "Withdrawal event should be emitted").to.not.be.undefined;

// Check only the first argument of the Withdrawal event
expect(withdrawalEvent.args[0]).to.equal(lockedAmount);
```

---
### anyValue function
import { anyValue } from "@nomicfoundation/hardhat-chai-matchers/withArgs";
wait expect(lock.withdraw())
          .to.emit(lock, "Withdrawal")
          .withArgs(lockedAmount, anyValue); // We accept any value as `when` arg
  :error occured like this, 
AssertionError: Expected 1732243098 to equal function anyValue() {
    return true;
}, but they have different lengths

---
### an issue with fsevents
```
warning Error running install script for optional dependency: "/Users/hyunjaelee/node_modules/@remix-project/remixd/node_modules/fsevents: Command failed.
Exit code: 1
Command: node install.js
Arguments: 
Directory: /Users/hyunjaelee/node_modules/@remix-project/remixd/node_modules/fsevents
Output:
node:events:491
      throw er; // Unhandled 'error' event
      ^

Error: spawn node-gyp ENOENT
    at Process.ChildProcess._handle.onexit (node:internal/child_process:285:19)
    at onErrorNT (node:internal/child_process:485:16)
    at processTicksAndRejections (node:internal/process/task_queues:83:21)
Emitted 'error' event on ChildProcess instance at:
    at Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
    at onErrorNT (node:internal/child_process:485:16)
    at processTicksAndRejections (node:internal/process/task_queues:83:21) {
  errno: -2,
  code: 'ENOENT',
  syscall: 'spawn node-gyp',
success Saved lockfile.
warning No license field
success Saved 568 new dependencies.
```

🏆 해결
1. Add this to your package.json file, then re-run yarn (or yarn install):
"resolutions": {
  "fsevents": "1.2.9"
}
2. 이렇게 하면 node-gyp가 설치됨
3. 그러고나서 위의 resolutions 부분을 제거하고 다시 yarn을 실행해서 fsevents를 최선으로 재설치
4. 안 그러면 "Typeerror: fsevents.watch is not a function" 발생할 수 있음.


---
### 로컬 링크 만들기
	- yarn add /Users/hyunjaelee/work/hardhat-zksync/packages/hardhat-zksync-deploy

---
### NPM publish 에러
```
npm notice Publishing to https://registry.npmjs.org/
This operation requires a one-time password.
Enter OTP: 978999
npm ERR! code E402
npm ERR! 402 Payment Required - PUT https://registry.npmjs.org/@poohnet%2fpooh-swap-v2-core - You must sign up for private packages

npm ERR! A complete log of this run can be found in:
```
🏆 해결
npm public --access public을 사용해야 함.

-------
## Smart Contract/Hardhat
🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※

---
### Hardhat config defaultNetwork
참고: https://github.com/poohgithub/zksync-era/blob/main/poohnet/paymaster-examples/contracts/hardhat.config.ts

---
### create2 함수
아래 함수는 UniswapV2Factory에서 사용되는 코드임

```solidity
bytes memory bytecode = type(UniswapV2Pair).creationCode;
bytes32 salt = keccak256(abi.encodePacked(token0, token1));
assembly {
    pair := create2(0, add(bytecode, 32), mload(bytecode), salt)
}
```

Unlike create, which generates the contract address based on the address of the creator and how many contracts it has created (nonce), create2 generates the address using the creator's address, a provided salt, and the hash of the initialization code. This allows for predictable computation of the contract's address before the contract is actually deployed.

- Endowment (0): This is the amount of Ether, in wei, that is sent to the new contract upon creation. In this case, it's set to 0, meaning no Ether is sent.

- Memory Start (add(bytecode, 32)):
bytecode is the initialization code for the contract you want to create. In Solidity, contract bytecode is often stored in an array, and this array includes a 32-byte length prefix.
add(bytecode, 32) calculates the starting point of the actual bytecode, skipping the first 32 bytes which represent the length of the bytecode. This is necessary because create2 requires a pointer to the start of the actual code, not the length prefix.
Size of Code (mload(bytecode)):

- mload(bytecode) is used to load the first 32 bytes of bytecode, which, as mentioned, contain its size. This tells create2 how much of the memory starting from add(bytecode, 32) it should read and use as the initialization code.
Salt (salt):

- The salt is a 32-byte value that you provide. It's part of the formula used to calculate the address of the new contract.
In your code, salt is generated from the hash of two token addresses, which helps ensure that each pair of tokens gets a unique contract address.

---
### 트랜잭션 취소하는 방법
- https://support.metamask.io/hc/en-us/articles/360015489251-How-to-speed-up-or-cancel-a-pending-transaction
- MetaMask의 설정의 고급에 들어가서 "활동 및 논스 데이터 지우기"

---
### Nonce 얻어내기
- docker exec -it pow-node geth attach data/geth.ipc
- eth.getTransactionCount("0x8B595d325485a0Ca9d41908cAbF265E23C172847")
- 여기서 나타나는 Nonce를 트랙잭션에서 사용하는 것임.
- 다른 방법
    - const nonce = await provider.getTransactionCount(admin.address);

---
### Type error: Cannot find module '../typechain-types' or its corresponding type declarations.
그냥 typechain-types 폴더를 쓰지 않기로 함 

---
### Error: network does not support ENS
다음과 같이 VAULT_CONTRACT 주소 잘못됨, 즉, 0x가 두번 쓰이고 있었음.
VAULT_CONTRACT=0x0x7f28F281d57AC7d99A8C2FAd2d37271c2c9c67D6		

---
### L1-governance 배포 에러
```
L1-governance git:(main) ✗ yarn hardhat run --network localnet ./scripts/deploy.ts 
yarn run v1.22.19
warning package.json: No license field
$ /Users/hyunjaelee/work/tutorials/L1-governance/node_modules/.bin/hardhat run --network localnet ./scripts/deploy.ts
TypeError: (0 , ethers_1.getAddress) is not a function
```

🏆 다음의 세단계 필요
1. yarn add --dev hardhat @nomiclabs/hardhat-ethers@npm:hardhat-deploy-ethers ethers
2. const deployed = await contract.waitForDeployment();
3. console.log(`Governance contract was successfully deployed at ${await deployed.getAddress()}`);

🏆 원인
- ethers 버전이 6으로 업그레이드되면서 함수명이 바뀌었음
- 기타
  - 0xAe9Bc22B80D98aD3350a35118F723d36d8E4e141

### wait 함수의 인자
The wait() function of ContractTransaction takes a single optional argument, which is the timeout in blocks. The default timeout is 10 blocks. This means that the wait() function will block for up to 10 blocks before throwing an error if the transaction has not been confirmed.
You can increase the timeout period by passing a higher number to the wait() function. For example, the following code will block for up to 20 blocks before throwing an error:

### Contract Size
https://ethereum.stackexchange.com/questions/31515/how-to-check-the-size-of-a-contract-in-solidity

### Exceeds Gas Limit 에러
- Genesis.json에서 gasLimit를 에러 내용의 
- 에러내용 "gasLimit: BigNumber { _hex: '0x989680', _isBigNumber: true }" 만큼으로 늘려줌.
```
Error: Error: processing response error (body="{\"jsonrpc\":\"2.0\",\"id\":151,\"error\":{\"code\":-32000,\"message\":\"exceeds block gas limit\"}}\n", error={"code":-32000}, requestBody="{\"method\":\"eth_sendRawTransaction\",\"params\":[\"0x02f90fd382300d0284461bffd584461bffd58398968094572b9410d9a14fa729f3af92cb83a07aaa472de080b90f644af63f020000000000000000000000000000000000000000000000000000000000000040fe07c7c6f88cdf003f00c1e47076de3576e136c7114496823271143b3d46e97e0000000000000000000000000000000000000000000000000000000000000ef9608060405234801561001057600080fd5b50610ed9806100206000396000f3fe6080604052600436106100f35760003560e01c80634d2301cc1161008a578063a8b0574e11610059578063a8b0574e1461025a578063bce38bd714610275578063c3077fa914610288578063ee82ac5e1461029b57600080fd5b80634d2301cc146101ec57806372425d9d1461022157806382ad56cb1461023457806386d516e81461024757600080fd5b80633408e470116100c65780633408e47014610191578063399542e9146101a45780633e64a696146101c657806342cbb15c146101d957600080fd5b80630f28c97d146100f8578063174dea711461011a578063252dba421461013a57806327e86d6e1461015b575b600080fd5b34801561010457600080fd5b50425b6040519081526020015b60405180910390f35b61012d610128366004610a85565b6102ba565b6040516101119190610bb7565b61014d610148366004610a85565b6104ef565b604051610111929190610bd1565b34801561016757600080fd5b50437fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0140610107565b34801561019d57600080fd5b5046610107565b6101b76101b2366004610c59565b610690565b60405161011193929190610cb3565b3480156101d257600080fd5b5048610107565b3480156101e557600080fd5b5043610107565b3480156101f857600080fd5b50610107610207366004610cdb565b73ffffffffffffffffffffffffffffffffffffffff163190565b34801561022d57600080fd5b5044610107565b61012d610242366004610a85565b6106ab565b34801561025357600080fd5b5045610107565b34801561026657600080fd5b50604051418152602001610111565b61012d610283366004610c59565b61085a565b6101b7610296366004610a85565b610a1a565b3480156102a757600080fd5b506101076102b6366004610d11565b4090565b60606000828067ffffffffffffffff8111156102d8576102d8610d2a565b60405190808252806020026020018201604052801561031e57816020015b6040805180820190915260008152606060208201528152602001906001900390816102f65790505b5092503660005b8281101561047757600085828151811061034157610341610d59565b6020026020010151905087878381811061035d5761035d610d59565b905060200281019061036f9190610d88565b6040810135958601959093506103886020850185610cdb565b73ffffffffffffffffffffffffffffffffffffffff16816103ac6060870187610dc6565b6040516103ba929190610e2b565b60006040518083038185875af1925050503d80600081146103f7576040519150601f19603f3d011682016040523d82523d6000602084013e6103fc565b606091505b50602080850191909152901515808452908501351761046d577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260846000fd5b5050600101610325565b508234146104e6576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601a60248201527f4d756c746963616c6c333a2076616c7565206d69736d6174636800000000000060448201526064015b60405180910390fd5b50505092915050565b436060828067ffffffffffffffff81111561050c5761050c610d2a565b60405190808252806020026020018201604052801561053f57816020015b606081526020019060019003908161052a5790505b5091503660005b8281101561068657600087878381811061056257610562610d59565b90506020028101906105749190610e3b565b92506105836020840184610cdb565b73ffffffffffffffffffffffffffffffffffffffff166105a66020850185610dc6565b6040516105b4929190610e2b565b6000604051808303816000865af19150503d80600081146105f1576040519150601f19603f3d011682016040523d82523d6000602084013e6105f6565b606091505b5086848151811061060957610609610d59565b602090810291909101015290508061067d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601760248201527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060448201526064016104dd565b50600101610546565b5050509250929050565b43804060606106a086868661085a565b905093509350939050565b6060818067ffffffffffffffff8111156106c7576106c7610d2a565b60405190808252806020026020018201604052801561070d57816020015b6040805180820190915260008152606060208201528152602001906001900390816106e55790505b5091503660005b828110156104e657600084828151811061073057610730610d59565b6020026020010151905086868381811061074c5761074c610d59565b905060200281019061075e9190610e6f565b925061076d6020840184610cdb565b73ffffffffffffffffffffffffffffffffffffffff166107906040850185610dc6565b60405161079e929190610e2b565b6000604051808303816000865af19150503d80600081146107db576040519150601f19603f3d011682016040523d82523d6000602084013e6107e0565b606091505b506020808401919091529015158083529084013517610851577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260646000fd5b50600101610714565b6060818067ffffffffffffffff81111561087657610876610d2a565b6040519080825280602002602001820160405280156108bc57816020015b6040805180820190915260008152606060208201528152602001906001900390816108945790505b5091503660005b82811015610a105760008482815181106108df576108df610d59565b602002602001015190508686838181106108fb576108fb610d59565b905060200281019061090d9190610e3b565b925061091c6020840184610cdb565b73ffffffffffffffffffffffffffffffffffffffff1661093f6020850185610dc6565b60405161094d929190610e2b565b6000604051808303816000865af19150503d806000811461098a576040519150601f19603f3d011682016040523d82523d6000602084013e61098f565b606091505b506020830152151581528715610a07578051610a07576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601760248201527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060448201526064016104dd565b506001016108c3565b5050509392505050565b6000806060610a2b60018686610690565b919790965090945092505050565b60008083601f840112610a4b57600080fd5b50813567ffffffffffffffff811115610a6357600080fd5b6020830191508360208260051b8501011115610a7e57600080fd5b9250929050565b60008060208385031215610a9857600080fd5b823567ffffffffffffffff811115610aaf57600080fd5b610abb85828601610a39565b90969095509350505050565b6000815180845260005b81811015610aed57602081850181015186830182015201610ad1565b5060006020828601015260207fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f83011685010191505092915050565b600082825180855260208086019550808260051b84010181860160005b84811015610baa578583037fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe001895281518051151584528401516040858501819052610b9681860183610ac7565b9a86019a9450505090830190600101610b48565b5090979650505050505050565b602081526000610bca6020830184610b2b565b9392505050565b600060408201848352602060408185015281855180845260608601915060608160051b870101935082870160005b82811015610c4b577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa0888703018452610c39868351610ac7565b95509284019290840190600101610bff565b509398975050505050505050565b600080600060408486031215610c6e57600080fd5b83358015158114610c7e57600080fd5b9250602084013567ffffffffffffffff811115610c9a57600080fd5b610ca686828701610a39565b9497909650939450505050565b838152826020820152606060408201526000610cd26060830184610b2b565b95945050505050565b600060208284031215610ced57600080fd5b813573ffffffffffffffffffffffffffffffffffffffff81168114610bca57600080fd5b600060208284031215610d2357600080fd5b5035919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600082357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81833603018112610dbc57600080fd5b9190910192915050565b60008083357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe1843603018112610dfb57600080fd5b83018035915067ffffffffffffffff821115610e1657600080fd5b602001915036819003821315610a7e57600080fd5b8183823760009101908152919050565b600082357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc1833603018112610dbc57600080fd5b600082357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa1833603018112610dbc57600080fdfea2646970667358221220eca0cb14f4322010c8eb410ba0738474f94c966328e9db21a580ada159aa6c8564736f6c6343000811003300000000000000c080a086a949d9a5e6c0fca3315b4363c12e9a3953b20445bf0fbe3f659212e7792c92a02e2e4680f844eab38c40aa61874bc199fc45d96ac3d91fe668039df54e060786\"],\"id\":151,\"jsonrpc\":\"2.0\"}", requestMethod="POST", url="http://localhost:8545", code=SERVER_ERROR, version=web/5.7.1)
    at Logger.makeError (/Users/hyunjaelee/work/zksync-era/node_modules/@ethersproject/logger/src.ts/index.ts:269:28)
    at Logger.throwError (/Users/hyunjaelee/work/zksync-era/node_modules/@ethersproject/logger/src.ts/index.ts:281:20)
    at /Users/hyunjaelee/work/zksync-era/node_modules/@ethersproject/web/src.ts/index.ts:341:28
    at step (/Users/hyunjaelee/work/zksync-era/node_modules/@ethersproject/web/lib/index.js:33:23)
    at Object.next (/Users/hyunjaelee/work/zksync-era/node_modules/@ethersproject/web/lib/index.js:14:53)
    at fulfilled (/Users/hyunjaelee/work/zksync-era/node_modules/@ethersproject/web/lib/index.js:5:58)
    at processTicksAndRejections (node:internal/process/task_queues:96:5) {
  reason: 'processing response error',
  code: 'SERVER_ERROR',
  body: '{"jsonrpc":"2.0","id":151,"error":{"code":-32000,"message":"exceeds block gas limit"}}\n',
  error: Error: exceeds block gas limit
      at getResult (/Users/hyunjaelee/work/zksync-era/node_modules/@ethersproject/providers/src.ts/json-rpc-provider.ts:142:28)
      at processJsonFunc (/Users/hyunjaelee/work/zksync-era/node_modules/@ethersproject/web/src.ts/index.ts:383:22)
      at /Users/hyunjaelee/work/zksync-era/node_modules/@ethersproject/web/src.ts/index.ts:320:42
      at step (/Users/hyunjaelee/work/zksync-era/node_modules/@ethersproject/web/lib/index.js:33:23)
      at Object.next (/Users/hyunjaelee/work/zksync-era/node_modules/@ethersproject/web/lib/index.js:14:53)
      at fulfilled (/Users/hyunjaelee/work/zksync-era/node_modules/@ethersproject/web/lib/index.js:5:58)
      at processTicksAndRejections (node:internal/process/task_queues:96:5) {
    code: -32000,
    data: undefined
  },
  requestBody: '{"method":"eth_sendRawTransaction","params":["0x02f90fd382300d0284461bffd584461bffd58398968094572b9410d9a14fa729f3af92cb83a07aaa472de080b90f644af63f020000000000000000000000000000000000000000000000000000000000000040fe07c7c6f88cdf003f00c1e47076de3576e136c7114496823271143b3d46e97e0000000000000000000000000000000000000000000000000000000000000ef9608060405234801561001057600080fd5b50610ed9806100206000396000f3fe6080604052600436106100f35760003560e01c80634d2301cc1161008a578063a8b0574e11610059578063a8b0574e1461025a578063bce38bd714610275578063c3077fa914610288578063ee82ac5e1461029b57600080fd5b80634d2301cc146101ec57806372425d9d1461022157806382ad56cb1461023457806386d516e81461024757600080fd5b80633408e470116100c65780633408e47014610191578063399542e9146101a45780633e64a696146101c657806342cbb15c146101d957600080fd5b80630f28c97d146100f8578063174dea711461011a578063252dba421461013a57806327e86d6e1461015b575b600080fd5b34801561010457600080fd5b50425b6040519081526020015b60405180910390f35b61012d610128366004610a85565b6102ba565b6040516101119190610bb7565b61014d610148366004610a85565b6104ef565b604051610111929190610bd1565b34801561016757600080fd5b50437fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0140610107565b34801561019d57600080fd5b5046610107565b6101b76101b2366004610c59565b610690565b60405161011193929190610cb3565b3480156101d257600080fd5b5048610107565b3480156101e557600080fd5b5043610107565b3480156101f857600080fd5b50610107610207366004610cdb565b73ffffffffffffffffffffffffffffffffffffffff163190565b34801561022d57600080fd5b5044610107565b61012d610242366004610a85565b6106ab565b34801561025357600080fd5b5045610107565b34801561026657600080fd5b50604051418152602001610111565b61012d610283366004610c59565b61085a565b6101b7610296366004610a85565b610a1a565b3480156102a757600080fd5b506101076102b6366004610d11565b4090565b60606000828067ffffffffffffffff8111156102d8576102d8610d2a565b60405190808252806020026020018201604052801561031e57816020015b6040805180820190915260008152606060208201528152602001906001900390816102f65790505b5092503660005b8281101561047757600085828151811061034157610341610d59565b6020026020010151905087878381811061035d5761035d610d59565b905060200281019061036f9190610d88565b6040810135958601959093506103886020850185610cdb565b73ffffffffffffffffffffffffffffffffffffffff16816103ac6060870187610dc6565b6040516103ba929190610e2b565b60006040518083038185875af1925050503d80600081146103f7576040519150601f19603f3d011682016040523d82523d6000602084013e6103fc565b606091505b50602080850191909152901515808452908501351761046d577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260846000fd5b5050600101610325565b508234146104e6576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601a60248201527f4d756c746963616c6c333a2076616c7565206d69736d6174636800000000000060448201526064015b60405180910390fd5b50505092915050565b436060828067ffffffffffffffff81111561050c5761050c610d2a565b60405190808252806020026020018201604052801561053f57816020015b606081526020019060019003908161052a5790505b5091503660005b8281101561068657600087878381811061056257610562610d59565b90506020028101906105749190610e3b565b92506105836020840184610cdb565b73ffffffffffffffffffffffffffffffffffffffff166105a66020850185610dc6565b6040516105b4929190610e2b565b6000604051808303816000865af19150503d80600081146105f1576040519150601f19603f3d011682016040523d82523d6000602084013e6105f6565b606091505b5086848151811061060957610609610d59565b602090810291909101015290508061067d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601760248201527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060448201526064016104dd565b50600101610546565b5050509250929050565b43804060606106a086868661085a565b905093509350939050565b6060818067ffffffffffffffff8111156106c7576106c7610d2a565b60405190808252806020026020018201604052801561070d57816020015b6040805180820190915260008152606060208201528152602001906001900390816106e55790505b5091503660005b828110156104e657600084828151811061073057610730610d59565b6020026020010151905086868381811061074c5761074c610d59565b905060200281019061075e9190610e6f565b925061076d6020840184610cdb565b73ffffffffffffffffffffffffffffffffffffffff166107906040850185610dc6565b60405161079e929190610e2b565b6000604051808303816000865af19150503d80600081146107db576040519150601f19603f3d011682016040523d82523d6000602084013e6107e0565b606091505b506020808401919091529015158083529084013517610851577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260646000fd5b50600101610714565b6060818067ffffffffffffffff81111561087657610876610d2a565b6040519080825280602002602001820160405280156108bc57816020015b6040805180820190915260008152606060208201528152602001906001900390816108945790505b5091503660005b82811015610a105760008482815181106108df576108df610d59565b602002602001015190508686838181106108fb576108fb610d59565b905060200281019061090d9190610e3b565b925061091c6020840184610cdb565b73ffffffffffffffffffffffffffffffffffffffff1661093f6020850185610dc6565b60405161094d929190610e2b565b6000604051808303816000865af19150503d806000811461098a576040519150601f19603f3d011682016040523d82523d6000602084013e61098f565b606091505b506020830152151581528715610a07578051610a07576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601760248201527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060448201526064016104dd565b506001016108c3565b5050509392505050565b6000806060610a2b60018686610690565b919790965090945092505050565b60008083601f840112610a4b57600080fd5b50813567ffffffffffffffff811115610a6357600080fd5b6020830191508360208260051b8501011115610a7e57600080fd5b9250929050565b60008060208385031215610a9857600080fd5b823567ffffffffffffffff811115610aaf57600080fd5b610abb85828601610a39565b90969095509350505050565b6000815180845260005b81811015610aed57602081850181015186830182015201610ad1565b5060006020828601015260207fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f83011685010191505092915050565b600082825180855260208086019550808260051b84010181860160005b84811015610baa578583037fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe001895281518051151584528401516040858501819052610b9681860183610ac7565b9a86019a9450505090830190600101610b48565b5090979650505050505050565b602081526000610bca6020830184610b2b565b9392505050565b600060408201848352602060408185015281855180845260608601915060608160051b870101935082870160005b82811015610c4b577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa0888703018452610c39868351610ac7565b95509284019290840190600101610bff565b509398975050505050505050565b600080600060408486031215610c6e57600080fd5b83358015158114610c7e57600080fd5b9250602084013567ffffffffffffffff811115610c9a57600080fd5b610ca686828701610a39565b9497909650939450505050565b838152826020820152606060408201526000610cd26060830184610b2b565b95945050505050565b600060208284031215610ced57600080fd5b813573ffffffffffffffffffffffffffffffffffffffff81168114610bca57600080fd5b600060208284031215610d2357600080fd5b5035919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600082357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81833603018112610dbc57600080fd5b9190910192915050565b60008083357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe1843603018112610dfb57600080fd5b83018035915067ffffffffffffffff821115610e1657600080fd5b602001915036819003821315610a7e57600080fd5b8183823760009101908152919050565b600082357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc1833603018112610dbc57600080fd5b600082357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa1833603018112610dbc57600080fdfea2646970667358221220eca0cb14f4322010c8eb410ba0738474f94c966328e9db21a580ada159aa6c8564736f6c6343000811003300000000000000c080a086a949d9a5e6c0fca3315b4363c12e9a3953b20445bf0fbe3f659212e7792c92a02e2e4680f844eab38c40aa61874bc199fc45d96ac3d91fe668039df54e060786"],"id":151,"jsonrpc":"2.0"}',
  requestMethod: 'POST',
  url: 'http://localhost:8545',
  transaction: {
    type: 2,
    chainId: 12301,
    nonce: 2,
    maxPriorityFeePerGas: BigNumber { _hex: '0x461bffd5', _isBigNumber: true },
    maxFeePerGas: BigNumber { _hex: '0x461bffd5', _isBigNumber: true },
    gasPrice: null,
    gasLimit: BigNumber { _hex: '0x989680', _isBigNumber: true },
    to: '0x572b9410D9a14Fa729F3af92cB83A07aaA472dE0',
    value: BigNumber { _hex: '0x00', _isBigNumber: true },
    data: '0x4af63f020000000000000000000000000000000000000000000000000000000000000040fe07c7c6f88cdf003f00c1e47076de3576e136c7114496823271143b3d46e97e0000000000000000000000000000000000000000000000000000000000000ef9608060405234801561001057600080fd5b50610ed9806100206000396000f3fe6080604052600436106100f35760003560e01c80634d2301cc1161008a578063a8b0574e11610059578063a8b0574e1461025a578063bce38bd714610275578063c3077fa914610288578063ee82ac5e1461029b57600080fd5b80634d2301cc146101ec57806372425d9d1461022157806382ad56cb1461023457806386d516e81461024757600080fd5b80633408e470116100c65780633408e47014610191578063399542e9146101a45780633e64a696146101c657806342cbb15c146101d957600080fd5b80630f28c97d146100f8578063174dea711461011a578063252dba421461013a57806327e86d6e1461015b575b600080fd5b34801561010457600080fd5b50425b6040519081526020015b60405180910390f35b61012d610128366004610a85565b6102ba565b6040516101119190610bb7565b61014d610148366004610a85565b6104ef565b604051610111929190610bd1565b34801561016757600080fd5b50437fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0140610107565b34801561019d57600080fd5b5046610107565b6101b76101b2366004610c59565b610690565b60405161011193929190610cb3565b3480156101d257600080fd5b5048610107565b3480156101e557600080fd5b5043610107565b3480156101f857600080fd5b50610107610207366004610cdb565b73ffffffffffffffffffffffffffffffffffffffff163190565b34801561022d57600080fd5b5044610107565b61012d610242366004610a85565b6106ab565b34801561025357600080fd5b5045610107565b34801561026657600080fd5b50604051418152602001610111565b61012d610283366004610c59565b61085a565b6101b7610296366004610a85565b610a1a565b3480156102a757600080fd5b506101076102b6366004610d11565b4090565b60606000828067ffffffffffffffff8111156102d8576102d8610d2a565b60405190808252806020026020018201604052801561031e57816020015b6040805180820190915260008152606060208201528152602001906001900390816102f65790505b5092503660005b8281101561047757600085828151811061034157610341610d59565b6020026020010151905087878381811061035d5761035d610d59565b905060200281019061036f9190610d88565b6040810135958601959093506103886020850185610cdb565b73ffffffffffffffffffffffffffffffffffffffff16816103ac6060870187610dc6565b6040516103ba929190610e2b565b60006040518083038185875af1925050503d80600081146103f7576040519150601f19603f3d011682016040523d82523d6000602084013e6103fc565b606091505b50602080850191909152901515808452908501351761046d577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260846000fd5b5050600101610325565b508234146104e6576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601a60248201527f4d756c746963616c6c333a2076616c7565206d69736d6174636800000000000060448201526064015b60405180910390fd5b50505092915050565b436060828067ffffffffffffffff81111561050c5761050c610d2a565b60405190808252806020026020018201604052801561053f57816020015b606081526020019060019003908161052a5790505b5091503660005b8281101561068657600087878381811061056257610562610d59565b90506020028101906105749190610e3b565b92506105836020840184610cdb565b73ffffffffffffffffffffffffffffffffffffffff166105a66020850185610dc6565b6040516105b4929190610e2b565b6000604051808303816000865af19150503d80600081146105f1576040519150601f19603f3d011682016040523d82523d6000602084013e6105f6565b606091505b5086848151811061060957610609610d59565b602090810291909101015290508061067d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601760248201527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060448201526064016104dd565b50600101610546565b5050509250929050565b43804060606106a086868661085a565b905093509350939050565b6060818067ffffffffffffffff8111156106c7576106c7610d2a565b60405190808252806020026020018201604052801561070d57816020015b6040805180820190915260008152606060208201528152602001906001900390816106e55790505b5091503660005b828110156104e657600084828151811061073057610730610d59565b6020026020010151905086868381811061074c5761074c610d59565b905060200281019061075e9190610e6f565b925061076d6020840184610cdb565b73ffffffffffffffffffffffffffffffffffffffff166107906040850185610dc6565b60405161079e929190610e2b565b6000604051808303816000865af19150503d80600081146107db576040519150601f19603f3d011682016040523d82523d6000602084013e6107e0565b606091505b506020808401919091529015158083529084013517610851577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260646000fd5b50600101610714565b6060818067ffffffffffffffff81111561087657610876610d2a565b6040519080825280602002602001820160405280156108bc57816020015b6040805180820190915260008152606060208201528152602001906001900390816108945790505b5091503660005b82811015610a105760008482815181106108df576108df610d59565b602002602001015190508686838181106108fb576108fb610d59565b905060200281019061090d9190610e3b565b925061091c6020840184610cdb565b73ffffffffffffffffffffffffffffffffffffffff1661093f6020850185610dc6565b60405161094d929190610e2b565b6000604051808303816000865af19150503d806000811461098a576040519150601f19603f3d011682016040523d82523d6000602084013e61098f565b606091505b506020830152151581528715610a07578051610a07576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601760248201527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060448201526064016104dd565b506001016108c3565b5050509392505050565b6000806060610a2b60018686610690565b919790965090945092505050565b60008083601f840112610a4b57600080fd5b50813567ffffffffffffffff811115610a6357600080fd5b6020830191508360208260051b8501011115610a7e57600080fd5b9250929050565b60008060208385031215610a9857600080fd5b823567ffffffffffffffff811115610aaf57600080fd5b610abb85828601610a39565b90969095509350505050565b6000815180845260005b81811015610aed57602081850181015186830182015201610ad1565b5060006020828601015260207fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f83011685010191505092915050565b600082825180855260208086019550808260051b84010181860160005b84811015610baa578583037fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe001895281518051151584528401516040858501819052610b9681860183610ac7565b9a86019a9450505090830190600101610b48565b5090979650505050505050565b602081526000610bca6020830184610b2b565b9392505050565b600060408201848352602060408185015281855180845260608601915060608160051b870101935082870160005b82811015610c4b577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa0888703018452610c39868351610ac7565b95509284019290840190600101610bff565b509398975050505050505050565b600080600060408486031215610c6e57600080fd5b83358015158114610c7e57600080fd5b9250602084013567ffffffffffffffff811115610c9a57600080fd5b610ca686828701610a39565b9497909650939450505050565b838152826020820152606060408201526000610cd26060830184610b2b565b95945050505050565b600060208284031215610ced57600080fd5b813573ffffffffffffffffffffffffffffffffffffffff81168114610bca57600080fd5b600060208284031215610d2357600080fd5b5035919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600082357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81833603018112610dbc57600080fd5b9190910192915050565b60008083357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe1843603018112610dfb57600080fd5b83018035915067ffffffffffffffff821115610e1657600080fd5b602001915036819003821315610a7e57600080fd5b8183823760009101908152919050565b600082357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc1833603018112610dbc57600080fd5b600082357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa1833603018112610dbc57600080fdfea2646970667358221220eca0cb14f4322010c8eb410ba0738474f94c966328e9db21a580ada159aa6c8564736f6c6343000811003300000000000000',
    accessList: [],
    hash: '0x7893259b825674bcb88e9fe491b4390d5f70b8a807cdc57169470db07f431c6c',
    v: 0,
    r: '0x86a949d9a5e6c0fca3315b4363c12e9a3953b20445bf0fbe3f659212e7792c92',
    s: '0x2e2e4680f844eab38c40aa61874bc199fc45d96ac3d91fe668039df54e060786',
    from: '0x52312AD6f01657413b2eaE9287f6B9ADaD93D5FE',
    confirmations: 0
  },
  transactionHash: '0x7893259b825674bcb88e9fe491b4390d5f70b8a807cdc57169470db07f431c6c'
}
error Command failed with exit code 1.
```

### hardhat-gas-reporter
hardhat.config.ts 참고: https://github.com/poohgithub/zksync-era/blob/main/poohnet/paymaster-examples/contracts/hardhat.config.ts


-------
## Github
🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※

### github 계정 꼬였을때
ERROR: Permission to poohgithub/poohnet-pow.git denied to jay-hyunjaelee.
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.

- ~/.gitconfig에 emial 설정 에서 equal sign 양 옆의 스페이스 없애기
- 재부팅하기 

---
### error: cannot run delta: No such file or directory
- git lg 실행시 발생
- brew install git-delta.

---
### git submodule update 에러 발생시 
```
git rm --cached path_to_submodule
Edit .gitmodules File
Edit .git/config File
rm -rf .git/modules/path_to_submodule
git commit -am "Removed submodule"
git push
```

---
### 내가 올린 브랜치에 대해서 자동으로 PR추천을 할수 있도록 하기.
- Organization의 해당 리파지토리로 이동
- Settings -> General 이동
- Always suggest updating pull request branches 를

--- 
### Merge pull request 발생하지 않도록 Full Requests 설정
- Repository Setting -> Pull Requests
  - Uncheck: "Allow merge commits", "Allow squash merging" 

---
### 기타 정리
- git reset --hard michael/add-npm-script-prettier
	git remote update 한번 해줘야 함.
	해당 브랜치로 들어가서 최신 버전으로 갱신하기 
- git pull <remote> <remote branch>
	로컬의 수정을 반영하기
	ex) git pull zero commons-budget-contract
- git rebase 도중 파일 제거하기
	git rm --cached <file>  
- git rebase 도중 stage된 파일 리셋하기
	git reset HEAD~1 -- package.json
- revert
	※ This will create three separate revert commits:
		§ git revert a867b4af 25eee4ca 0766c053
	※ It also takes ranges. This will revert the last two commits:
		§ git revert HEAD~2..HEAD
	※ Similarly, you can revert a range of commits using commit hashes (non inclusive of first hash):
		§ git revert 0d1d7fc..a867b4a
- git clone시 폴더명 지정
	git clone git@github.com:whatever folder-name
- Fatal: Not possible to fast-forward, aborting
	git pull --rebase.

- git diff --name-only HEAD~1 HEAD~2
- git log with graph
git log --graph --format=format:'%C(bold blue)%h%C(reset) - %C(bold green)(%ar)%C(reset) %C(white)%an%C(reset)%C(bold yellow)%d%C(reset) %C(dim white)- %s%C(reset)' --all

😈 private repo clone
- $ key-gen
- $ eval "$(ssh-agent -s)"
- $ ss-add .ssh/id_rsa_graph_node
- id_rsa_graph_node.pub를 cat해서 리파지토리 Setting -> Deploy keys에 추가
- git clone git@github.com:bosagora/boa-space-graph-node.git
    
😈 Organization만들고, 포크하기 (fork)
poohgithub organization에서 Setting->Members privileges->Allow forking of private repositories.


-------
## Dev Errors
🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※

### failed to compute cache key: "/target/debug/zksync_server" not found: not found
Error: Child process exited with code 1

🏆 해결
- .dockerignore에서 포함되어 있는 것은 아닌지 확인 필요
- 만약 로컬 시스템에서 복사되는 것이라면 원래 없는 것일 수도 있음. 예를 들어 컴파일을 해야 나오는 파일이던가 하면 그런일이 발생

-------
## Mac
🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※

### MacVim을 Spotlight에서 보도록 하기
For those with Yosemite and MacVim from homebrew not showing up in Spotlight, using an alias works.

(Be sure to delete any MacVim that is already in /Applications.)

From the Terminal:

Uninstall existing: brew uninstall macvim
Install latest: brew install macvim
Open directory in Finder. Ex: open /usr/local/Cellar/macvim/7.3-64
In Finder, right-click on the MacVim.app icon and select "Make Alias".
Copy the alias you just created to the /Applications folder.
Spotlight will index the MacVim alias.

Source: https://github.com/Homebrew/homebrew/issues/8970#issuecomment-4262695

---
### Mac Spotlight에서 특정 애플리케이션 찾지 못할 때
First, turn off Spotlight:
sudo mdutil -a -i off

Next, unload the metadata file that controls Spotlight's index:
sudo launchctl unload -w /System/Library/LaunchDaemons/com.apple.metadata.mds.plist
여기서 에러날 수 있음 그냥 무시하고 다음으로 넘어감.

The following command re-loads the index:
sudo launchctl load -w /System/Library/LaunchDaemons/com.apple.metadata.mds.plist

Finally, turn Spotlight back on:
sudo mdutil -a -i on

---
### Mac에서 Sublime Text를 커맨트창에서 실행시키기
```
ln -s "/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl" /usr/local/bin/subl
```

-------
## vi
🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※

### files 파일 만들기
find . -type f -not -path .*/node_modules/* -not -path .*/.git/* -not -path .*/venv/* > files

find ./ -type f > files
find . -type file -name '*.js' -o -name '*.json' > files  //-o는 or를 뜻함
find . -type f -not -path './node_modules/*' -not -path './chaindata/*' > files

open file: ctrl w, ctrl f

---
### basics

g t: Next tab, 그냥 에디터에서 g와 t를 치면 됨
g T: Prior tab
nnn g t: Numbered tab, nnn은 숫자를 나타냄, 1일수도 있고, 12일수도 있음.

"*yy           ; copt from vi 
:! wc          ; sh command in vi

:shell 혹은 :sh를 이용해서 shell(:12)로 빠져나갈 수 있다. exit 혹은 Ctrl+D를 이용해서 vim으로 되돌아올 수 있다.
:! # 마지막 커맨드의 결과보기 

mvim --remote-tab-silent search.go  // 같은 윈도우에서 열기

---
### Move cursor to end of file in vim
```
:$
```

---
### 한글 깨지는 문제
set enc=utf-8

---
### vimrc (~/.vimrc)
set nocompatible
filetype off
set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()
Plugin 'gmarik/Vundle.vim' "required
Plugin 'tpope/vim-fugitive' "required 
call vundle#end()
filetype plugin indent on " Put your non-Plugin stuff after this line
:w
:source %
:PluginInstall
syntax enable " syntax highlighting
set nu " add line numbers
set smartindent " make smart indent
set tabstop=4 " tab width as 4 (default 8)
set shiftwidth=4
set softtabstop=4       ; TAB키를 눌렀을때 몇 칸을 이동?
set tabstop=4           ; 하나의 TAB을 몇 칸으로 인식? 
set number		            ;  Line Number
set expandtab " spaces for tab
set incsearch
set mouse=a

-------

## AWS
🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※

---
### AWS 가격표
참고: https://aws.amazon.com/ec2/pricing/on-demand/

| name    | hourly | vCPU | Memory | Storage   | Network performance |
|----------|----------|--|---------|------------|----------|
|t3.small	|$0.026	  |2 |2 GiB	    |EBS    |Up to 5 Gigabit
|t3.medium	|$0.052	  |2 |4 GiB	    |EBS    |Up to 5 Gigabit
|t3.large	|$0.104	  |2 |8 GiB	    |EBS    |Up to 5 Gigabit

---
### AWS에 Load Balancer 추가시 
• Certifacate Manager를 통해서 도메인 추가
	- "Create records in Route 53" 해줘야 함.

---
### node3에 들어가서 postgresql 도커 접속방법
sudo docker exec -it ec22f5036e09 bash
psql -d db -U postgres -W

---
### WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!
Add correct host key in /Users/hyunjaelee/.ssh/known_hosts to get rid of this message.

---
### public key 확인 및 깃헙에 추가하기
- `cat .ssh/id_rsa_linked0.pub`
- 계정의 세팅으로 들어가면 `SSH and GPG keys`에 집어넣으면 됨.
- git clone할 때 sudo를 넣어야 `Load key … : Permission denied` 에러가 발생하지 않음.
- `git clone https://github.com/linked0/agora.git` 이건 잘되는 ssh로 받을때 안됨

---
### 접속
```
ssh -i "pooh-seoul.pem" ubuntu@ec2-52-79-227-164.ap-northeast-2.compute.amazonaws.com
```

---
### AWS에서 파일 전송 
* 가져오기
```
scp -i ~/pooh/pooh-seoul.pem ubuntu@ec2-52-78-204-156.ap-northeast-2.compute.amazonaws.com:~/share/test.txt .
```
* 보내기
```
scp -i ~/pooh/pooh-seoul.pem test.txt ubuntu@ec2-52-78-204-156.ap-northeast-2.compute.amazonaws.com:~/share/test.txt
```

---
### Load Balancer 
- Mappings는 모든 존으로
- Security Group은 AgoraDevNet_ELB
- 리스너 지정: Target Group지정
- 나중에 80에 대해서 443으로 Redirect

---
### URL로 접근이 안되는 문제
- 실패상황황인데, CNAME과 A 설정만 맞으면 될 것 같음 (230303)

---
### Target Group
- Basic configuration: Instances
- Protocol/Port 지정
- Protocol version: HTTP1
- Health checks는 그대로 두면 됨.

---
### AWS 타임존 변경
```shell
$tzselect
```
.profile에 다음을 추가하고 재로그인
```
TZ='Asia/Seoul'; export TZ
```
-------
## Know
🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※

### Memo Google Docs
- bit.ly/44TH7Ua : Memo Pub
- bit.ly/357Is0p : Memo

### 예상치 못한 컴파일 에러가 나올때
- brew update && brew upgrade

### Generate Private Key
openssl ecparam -name secp256k1 -genkey -noout

### Mac XCode
brew install macvim --override-system-vim

https://developer.apple.com/download/more/?=command%20line%20tools 에서 다운로드 필요
xcode-select install
sudo xcode-select --switch /Library/Developer/CommandLineTools

### source를 다른 위치에 new_source라는 이름으로 복사(두가지 방법)
cp -a source ~/temp/new_source

find . -iname mainview*
touch -t "201610041200" timestamp
find . -type f -newer timestamp

### 텍스트 찾기
egrep -irnH --include=\*.cpp --exclude-dir=.svn 'beacon.pntbiz.com' ./

sudo xcode-select -s /Applications/XCode7.2/Xcode.app/
To clear the terminal manually: Cmd + K
ps aux | grep chrome

-------
## 자주 사용
🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※
나중에 위 섹션에 정리되어야 함.

### 명령어 하나로 git commit과 push
.gitconfig에 다음 추가하고 vi종료하면 바로 적용됨
```
[alias]
    cmp = "!f() { git add -A && git commit -m \"$@\" && git push; }; f"
```
```
git cmp 'update'
```

아래도 방법
```
git config alias.acp '! git commit -a -m "commit" && git push'
그리고 나서 git acp 하면됨
```


---
### .bash_profile
export PS1="\W \u$ "

hgrep() {
	grep -irnH --include=*.$1 "$2" ./  
}

cb() {
	curl -L bit.ly/3MT0VRb
}

alias hello='echo Hi!Jay~'
echo 'export PATH=/usr/local/bin:$PATH' >> ~/.bash_profile

---
### git submodule

😈 git submodule add 
```
git submodule add https://github.com/example/lib.git external/lib
git submodule update --init
```
😈 git submodule remove
```
git rm --cached path_to_submodule
Edit .gitmodules File
Edit .git/config File
rm -rf .git/modules/path_to_submodule
git commit -am "Removed submodule"
git push
```
😈 git submodule update
```
git submodule update --remote
```
😈 하나만 다운로드 할때
```
git submodule update --init --recursive web2 
```

---
### tar
Zip Foler
tar --exclude='node_modules' -cvzf bccard.tar.gz bccard    //하위 폴더들에서 node_modules를 모두 제외시키기
tar -xvzf xxx.tar.gz -C ./data     //data 폴더에 풀고 싶을때.

tar --exclude='.git' --exclude='node_modules' -cvzf
