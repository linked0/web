🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※
# Jay's Dev Information

------
- [Jay's Dev Information](#jays-dev-information)
  - [Projects Summary](#projects-summary)
    - [Project Analysis](#project-analysis)
        - [문서 확인: 2일](#문서-확인-2일)
        - [테스트 코드 분석: 3일](#테스트-코드-분석-3일)
    - [poohnet testnet admin](#poohnet-testnet-admin)
    - [keyless2](#keyless2)
    - [ondo-v1](#ondo-v1)
    - [zksync](#zksync)
  - [Work/Dev](#workdev)
    - [Mac Setting](#mac-setting)
        - [.ssh 복사](#ssh-복사)
        - [xcode command/brew/zsh/iterm2/karabiner install](#xcode-commandbrewzshiterm2karabiner-install)
        - [karanbiner 설치 및 karabiner.json](#karanbiner-설치-및-karabinerjson)
        - [awscli 설치 및 aws configure](#awscli-설치-및-aws-configure)
        - [chatgpt-cli](#chatgpt-cli)
        - [npm yarn docker install](#npm-yarn-docker-install)
        - [nvm install](#nvm-install)
        - [rust/postgresql install](#rustpostgresql-install)
        - [MySql Server 설치](#mysql-server-설치)
        - [Whale, Miro, onenote, Visual Studio, Xcode](#whale-miro-onenote-visual-studio-xcode)
        - [기타](#기타)
    - [Slack](#slack)
  - [Blockchain](#blockchain)
    - [hardhat localnet 실행하기](#hardhat-localnet-실행하기)
    - [ganache localnet 실행하기](#ganache-localnet-실행하기)
    - [clique in genesis.json](#clique-in-genesisjson)
    - [BOA 유통량 API](#boa-유통량-api)
    - [이더리엄 Endpoint](#이더리엄-endpoint)
  - [Hardhat](#hardhat)
    - [Hardhat / solidity](#hardhat--solidity)
    - [Hardhat / Foundry](#hardhat--foundry)
    - [Workspaces](#workspaces)
  - [Foundry](#foundry)
    - [Install Foundry](#install-foundry)
    - [Initializing a new Foundry Project](#initializing-a-new-foundry-project)
  - [Dev Settings](#dev-settings)
    - [Node workspaces](#node-workspaces)
    - [TypsScript/Nodejs](#typsscriptnodejs)
    - [Docker](#docker)
    - [NPM](#npm)
    - [Python](#python)
    - [Rust](#rust)
    - [Prettier 적용](#prettier-적용)
  - [Github](#github)
    - [fast-forward 문제](#fast-forward-문제)
    - [로컬의 커밋을 날려먹었을때](#로컬의-커밋을-날려먹었을때)
    - [github 계정 꼬였을때](#github-계정-꼬였을때)
    - [error: cannot run delta: No such file or directory](#error-cannot-run-delta-no-such-file-or-directory)
    - [git submodule update 에러 발생시](#git-submodule-update-에러-발생시)
    - [내가 올린 브랜치에 대해서 자동으로 PR추천을 할수 있도록 하기.](#내가-올린-브랜치에-대해서-자동으로-pr추천을-할수-있도록-하기)
    - [Merge pull request 발생하지 않도록 Full Requests 설정](#merge-pull-request-발생하지-않도록-full-requests-설정)
    - [기타 정리](#기타-정리)
  - [Mac](#mac)
    - [MacVim을 Spotlight에서 보도록 하기](#macvim을-spotlight에서-보도록-하기)
    - [Mac Spotlight에서 특정 애플리케이션 찾지 못할 때](#mac-spotlight에서-특정-애플리케이션-찾지-못할-때)
    - [Mac에서 Sublime Text를 커맨트창에서 실행시키기](#mac에서-sublime-text를-커맨트창에서-실행시키기)
  - [vi](#vi)
    - [줄번호](#줄번호)
    - [files 파일 만들기](#files-파일-만들기)
    - [basics](#basics)
    - [Move cursor to end of file in vim](#move-cursor-to-end-of-file-in-vim)
    - [한글 깨지는 문제](#한글-깨지는-문제)
    - [vimrc (~/.vimrc)](#vimrc-vimrc)
  - [AWS](#aws)
    - [AWS 가격표](#aws-가격표)
    - [AWS에 Load Balancer 추가시](#aws에-load-balancer-추가시)
    - [node3에 들어가서 postgresql 도커 접속방법](#node3에-들어가서-postgresql-도커-접속방법)
    - [WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!](#warning-remote-host-identification-has-changed)
    - [public key 확인 및 깃헙에 추가하기](#public-key-확인-및-깃헙에-추가하기)
    - [접속](#접속)
    - [AWS에서 파일 전송](#aws에서-파일-전송)
    - [Load Balancer](#load-balancer)
    - [URL로 접근이 안되는 문제](#url로-접근이-안되는-문제)
    - [Target Group](#target-group)
    - [AWS 타임존 변경](#aws-타임존-변경)
  - [Know](#know)
    - [Memo Google Docs](#memo-google-docs)
    - [예상치 못한 컴파일 에러가 나올때](#예상치-못한-컴파일-에러가-나올때)
    - [Generate Private Key](#generate-private-key)
    - [Mac XCode](#mac-xcode)
    - [source를 다른 위치에 new\_source라는 이름으로 복사(두가지 방법)](#source를-다른-위치에-new_source라는-이름으로-복사두가지-방법)
  - [단축키](#단축키)
    - [🌸 Google docs](#-google-docs)
    - [🌸 poohnet (EL/CL) 실행하기](#-poohnet-elcl-실행하기)
    - [🌸 .bash\_profile - git push config](#-bash_profile---git-push-config)
    - [🌸 hardhat 프로젝트 만들기 🌸](#-hardhat-프로젝트-만들기-)
    - [🌸 Command](#-command)
    - [🌸 Mac](#-mac)
    - [🦋 Colab 🦋](#-colab-)
    - [🦋 VSCode I 🦋](#-vscode-i-)
    - [🌸 Block projects](#-block-projects)
    - [🌺🌺🌺🌺🌺🌺 latest forge 🌺🌺🌺🌺🌺🌺](#-latest-forge-)
    - [🌼🌼🌼🌼 latest hardhat 🌼🌼🌼🌼](#-latest-hardhat-)
    - [🌟🌟🌟🌟🌟🌟 git submodule 🌟🌟🌟🌟🌟🌟](#-git-submodule-)
    - [🦋 VSCode II 🦋](#-vscode-ii-)
    - [🌸 Whale 듀얼탭-Docker-Screen](#-whale-듀얼탭-docker-screen)
    - [🌸 curl](#-curl)
    - [🌸 텍스트 검색 - 프로세스 찾기 - zip](#-텍스트-검색---프로세스-찾기---zip)

## Projects Summary
🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※
### Project Analysis
##### 문서 확인: 2일
1. 홈페이지에서  기본정보 습득 (예: centrifuge.io)
  - 개발자 문서 및 github 사이트 찾기
  - 홈페이지에 기본적인 정보 다 있음.
  - 개괄적인 정보를 위해서 **구글링해서 찾아보기**
3. 홈페이지에서 찾은 doc 문서 보기
4. github repo 찾아서 기본 보기
5. discord 들어가보기
6. 진행 상황을 구글 Docs에 정리
  - 필요하면 다이어리도 활용
  - 코드에 대해서는 Miro에 정리

##### 테스트 코드 분석: 3일
1. 환경설정
  - 필요한 서버 및 구성 확인
2. 테스트 코드 실행
### poohnet testnet admin
58984b2bf6f0f3de4f38290ed3c541ac27bac384b378073ab133af8b314a1887

0x1811DfdE14b2e9aBAF948079E8962d200E71aCFD

### keyless2
- hardhat-deploy
- .env.sample

### ondo-v1
- "local-node": "export BLOCKCHAIN='ethereum' && export POOH='JAY' && hardhat node",
  
---
### zksync
local-setup에서 clear-sql.sh와 start-sql.sh
localentry.sh 실행
greeter-example에서 deploy-test와 greet-test진행


------
## Work/Dev
🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※
### Mac Setting
##### .ssh 복사
iCloud/pooh/ssh.tar

##### xcode command/brew/zsh/iterm2/karabiner install
```
xcode-select —-install
/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
brew install --cask iterm2 | brew install zsh | brew install karabiner-elements
sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
```

##### karanbiner 설치 및 karabiner.json
- iterm2 - Preferences - Profiles - Silence bell
- [gitconfig html](sub/gitconfig.htmlml) 내용은 .gitconfig에 복사 & `git init`

##### awscli 설치 및 aws configure

[aws cli](https://awscli.amazonaws.com/AWSCLIV2.pkg)

```
$ aws configure
AWS Access Key ID: 맥 메모에 있음
AWS Secret Access Key : 맥 메모에 있음.
Default region name [None]: ap-northeast-2
Default output format [None]:
```

echo $SHELL로 쉘 확인하고 아래 .zshrc에 복사
```
`단축키` 부분으로 이동
```
.zshrc에 테마 찾아서 복사
```
ZSH_THEME="robbyrussell"
```

finder 열고 다음 실행하면 숨김 파일 보임
```
Command + Shift + .
```

##### chatgpt-cli
```
brew tap kardolus/chatgpt-cli && brew install chatgpt-cli
```
Set the OPENAI_API_KEY environment variable to your [ChatGPT secret key](https://platform.openai.com/account/api-keys). To set the environment variable, you can add the following line to your shell profile (e.g., ~/.bashrc, ~/.zshrc, or ~/.bash_profile), replacing your_api_key with your actual key:
```
export OPENAI_API_KEY="your_api_key"
```

To enable history tracking across CLI calls
```
mkdir -p ~/.chatgpt-cli
```

To start interactive mode, use the -i or --interactive flag:
```
chatgpt --interactive
```

To use the pipe feature, create a text file containing some context.
Then, use the pipe feature to provide this context to ChatGPT:
```
cat context.txt | chatgpt "What kind of toy would Kya enjoy?"
```

And run this
```
chatgpt what is the capital of the Netherlands
```

List the models
```
chatgpt --list-models
```

Set a model
```
chatgpt --set-model gpt-4-turbo-2024-04-09
```

##### npm yarn docker install
```
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash
npm install -g yarn
brew install cask docker
brew install cask docker-compose
```
##### nvm install
```
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.34.0/install.sh | bash
source ~/.nvm/nvm.sh
```

https://www.docker.com/products/docker-desktop/ 도커 Desktop (linked0/**)

##### rust/postgresql install
```
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
cargo install sqlx-cli
```
```
brew update
brew install postgresql
brew services start postgresql
```
psql postgres <== 접속해볼 수 있음.

##### MySql Server 설치
- https://dev.mysql.com/downloads/mysql/ 이동
- 버전에 맞게 ARM이나 X86 버전 설치 
- 예) macOS 14 (ARM, 64-bit), DMG Archive 이나 macOS 14 (x86, 64-bit), DMG Archive
- MySQL Workbench도 설치
- 초기화: 시스템 메뉴 -> 설정 -> 왼쪽 하단의 MySQL 클릭해서 들어가서 "Initialize Database" 클릭
- 암호는 alfred0!@

##### Whale, Miro, onenote, Visual Studio, Xcode
- Command Palette: [⇧⌘P ] Shell command
- Settings 열기: cmd + ,
- 느린 스크롤 세팅: Settings 열기 - terminal smo 검색 - Smooth Scrolling 체크
- Markdown All in One 플러그인: 마크다운 컨텐트 만들어주는 VSCode 
- VS Code 플러그인 : Solidity/Go/rust-analyzer, Live Preview, Github Copilot, Markdown All in One
- VS Code 세팅: Editor: Hover Enable을 Disable로 바꿔야 코드창에서 팝업 안뜸
- XCode: [Apple Developer](https://developer.apple.com/xcode/resources/)
- FileMerge: open /Applications/Xcode.app/Contents/Applications/FileMerge.app

##### 기타
- 맥 메인 모니터 설정 및 Dock 사이즈 조정
- 데스크탑 및 Dock: Mission Control - Spaces를 최근 사용내역에 따라 자동으로 재정렬
- 휴지통 컵

------
### Slack

😈 github subscribe
```
/github subscribe  bosagora/boa-space-contracts issues pulls commits releases deployments reviews comments
```

```
/github subscribe zeroone-boa/validators reviews comments
```
이것도 방법, 위의 것과 비교 필요: 
```
/github subscribe bosagora/boa-space-seaport-js issues pulls commits releases deployments reviews comments
```

😈 Calendar 추가(Dev Team)
😈 스타일가이드: https://github.com/bpfkorea/agora/blob/v0.x.x/doc/Style.md, 상세한 설명 필요


--------
## Blockchain
🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※
### hardhat localnet 실행하기

```
yarn hardhat node (chain id: 31337)
yarn hardhat run ./scripts/send-raw-tx.ts --network hardhat
```

Ethereum mainnet fork된 로컬 네트워크를 실행
```
yarn hardhat node --fork https://eth-mainnet.g.alchemy.com/v2/<key>
```

### ganache localnet 실행하기
```
npm install -g ganache-cli
ganache-cli
```

gaslimit을 주고 싶을때
```
ganache-cli -l 7900000
```
---
### clique in genesis.json
```json
{
  "config": {
    "chainId": 12301,
    "homesteadBlock": 0,
    "eip150Block": 0,
    "eip155Block": 0,
    "eip158Block": 0,
    "byzantiumBlock": 0,
    "constantinopleBlock": 0,
    "petersburgBlock": 0,
    "istanbulBlock": 0,
    "berlinBlock": 0,
    "londonBlock": 0,
    "arrowglacierBlock": 0,
    "clique": {
      "period": 1,
      "epoch": 30000
    }
  },
  ...
}
```
- "period":
This refers to the block time, the time interval between consecutive blocks. In this case, 1 means one second. This is a very fast block time, suitable for private or test networks where quick consensus is desired. In public networks, such short intervals could lead to network instability due to propagation delays and increased likelihood of forks.

- "epoch":
The epoch length, set here as 30000, is significant in Clique PoA. An epoch is a period after which the list of authorized signers can be updated. In Clique, every epoch blocks, a special block called the epoch transition block is generated, which contains the list of authorized signers for the next epoch. The number 30000 means that every 30,000 blocks, the network has an opportunity to update the list of signers.

---
### BOA 유통량 API
- 유통량: https://api.bosplatformfoundation.io/boa_circulating_supply
- 총발행량: https://api.bosplatformfoundation.io/boa_supply

---
### 이더리엄 Endpoint
- Alchemy 사용 (https://dashboard.alchemy.com/)


## Hardhat


### Hardhat / solidity
Hardhat은 기존 프로젝트에서는 안됨.
```
yarn init -y (=npm init -y)
yarn add --dev hardhat
npx hardhat

yarn add -D hardhat-deploy
yarn add -D dotenv
```

아래 두개는 같이 쓰면 안됨.
```
import "@nomicfoundation/hardhat-toolbox";
import "@nomiclabs/hardhat-waffle"; // 이것만써.
```
기타
```
yarn add @openzeppelin/contracts
```

--------
😈 solidiy
import "hardhat/console.sol";
npx hardhat compile

const tx = await factoryInstance.setFeeTo(process.env.FEE_TO);
const receipt = await (await tx).wait();


--- 

### Hardhat / Foundry
[Integrating with Foundry](https://hardhat.org/hardhat-runner/docs/advanced/hardhat-and-foundry)

If you have an existing Hardhat project and you want to use Foundry in it, you should follow these steps.

First, run `forge --version` to make sure that you have Foundry installed. If you don't, go `here` to get it.

After that, install the `@nomicfoundation/hardhat-foundry` plugin:

```
npm install --save-dev @nomicfoundation/hardhat-foundry
```
and import it in your Hardhat config:

```
import "@nomicfoundation/hardhat-foundry";
```
To complete the setup, run `npx hardhat init-foundry`. This task will create a `foundry.toml` file with the right configuration and install `forge-std`.

submodule이 아래와 같이 추가됨
```
[submodule "ex2/lib/forge-std"]
  path = ex2/lib/forge-std
  url = https://github.com/foundry-rs/forge-std
```

### Workspaces
- [hardhat-zksync](https://github.com/poohgithub/hardhat-zksync/tree/main) 참고


## Foundry
### Install Foundry
```
mkdir foundry
cd foundry
curl -L https://foundry.paradigm.xyz | bash
source ~/.bashrc 
foundryup
```

### Initializing a new Foundry Project
```
forge init .
```

## Dev Settings
🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※

### Node workspaces
😈 Structure and Configuration
- Workspace Root: A single workspace has a root directory, usually with a package.json file that includes a workspaces field.
- Sub-packages: Inside the root, there are subdirectories for each workspace, each with its own package.json file.
- Shared Configuration: Dependencies and scripts can be shared across workspaces, which is especially useful for common configurations and shared libraries.

😈 Reference Project
- [poohgithub zksync-era](https://github.com/poohgithub/zksync-era)
- [mater-labs pymaster-examples](https://github.com/matter-labs/paymaster-examples)

---
### TypsScript/Nodejs

😈 NodeJs 프로젝트
- npm init -y
- touch index.js

😈 TypeScript 프로젝트
- npm install -g typescript (or yarn global add typescript)
- npm init -y
- npx tsc --init
- package.json --> CoPilot이 다 해줌
 "build": "tsc",
  "start": "node dist/index.js"
- tsconfig.json
  "outDir": "./dist",
  "include": ["./scripts", "./test", "./typechain"],
  "files": ["./hardhat.config.ts"]
- mkdir src
- touch src/index.ts
- yarn build
- yarn start

😈 yarn
yarn add --dev 


### Docker

😈 Docker Image 만들기
1. https://github.com/poohgithub/poohgeth/blob/master/Dockerfile 참고
2. docker build -t linked0/poohgeth:v1.3 . // 끝의 dot(.) 주의
3. docker 실행 (optional)
docker run -p 3000:3000 linked0/poohgeth:v1.3
4. docker login
5. tag
   docker tag local-image-name linked0/poohgeth:v1.0
6. push
   docker push linked0/poohgeth:v1.3
7. pull 
   docker pull linked0/poohgeth:v1.3
8. run using docker-compose
https://github.com/poohgithub/poohgeth/blob/master/poohnet/docker-compose-node.yml 참조
docker compose -f docker-compose-node.yml up el1 -d

😈 Docker 이슈
- `docker build`시 오랫동안 멈춰있을 때, prune후에 재부팅해보기.
```
 docker container prune
``` 

😈 기타
- docker attach

- docker ps | grep 5432

- 파일의 권한도 github으로 등록된다. run_node 실행권한

- To restore the entire staging area to the HEAD commit, you can run the following command:
git restore --staged .

- 수호는 블록체인 생태계를 활성화하고 연결하기 위하여 Bridge, DEX와 같은 Dapp 프로덕트를 개발하고 있습니다.

---
### NPM
npm login
npm publish --access public

---
### Python
😈 venv 설정하고 간단한 프로그램 실행
python -m venv venv
source venv/bin/activate
code script.py

```
def hello_world():
    print("Hello World")

if __name__ == "__main__":
    hello_world()
```

python script.py

pip install requests
pip freeze > requirements.txt
pip install -r requirements.txt

다 끝나면 deactivate

😈 머신에 설치하기 
pip3 install -r requirements.txt
python3 setup.py install

```
from setuptools import find_packages, setup
setup(
    name="staking_deposit",
    version='2.5.2',
    py_modules=["staking_deposit"],
    packages=find_packages(exclude=('tests', 'docs')),
    python_requires=">=3.8,<4",
)
```
설치하면 아래의 위치에 설치됨
```
/Library/Python/3.9/site-packages/staking_deposit-2.5.4-py3.9.egg
```
설치 하고 나면 아래 쉘스크립트 실행 가능
https://github.com/poohgithub/poohprysm/blob/develop/poohnet/pooh-deposit-cli/deposit.sh

😈 colab
import matplotlib.pyplot as plt

😈 VS Code
- Open the Command Palette (⇧⌘P), start typing the Python: Create Environment
- 다른 프로젝트(예: poohcode)의 하위 프로젝트라면 .venv 폴더 복사
- source ./venv/bin/activate
- 수동으로 하는 방법: python3 -m venv venv39
- pip3 freeze > requirements.txt <== venv를 빠져나오고 해야함.
- python hello.py

---
### Rust
Homebrew rust와 rustup로 설치된 것과 연동안됨. 따라서 아래와 같이 지우기
brew uninstall rust

그리고 rustc 이용
rustup install nightly-2023-07-21
rustup default nightly-2023-07-21

---
### Prettier 적용
package.json의 "scripts" 섹션에 다음을 추가
```
"prettier": "node_modules/.bin/prettier --write --config .prettierrc 'contracts/**/*.sol' 'test/**/*.ts' 'utils/**/*.ts' 'scripts/**/*.ts'",
```

-------
## Github
🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※

### fast-forward 문제
- push 하려고 할때 아래와 같은 문제 발생 --> github remote의 브랜치가 더 최신버전일때 발생
```
$ account-abstraction git:(test-flow) ✗ git push -f
To github.com:linked0/account-abstraction
 ! [rejected]        test-flow -> test-flow (non-fast-forward)
error: failed to push some refs to 'github.com:linked0/account-abstraction'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Integrate the remote changes (e.g.
hint: 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.
```
- 이럴 경우는 다음의 단계를 거침
  - git fetch origin
  - git reset --hard HEAD~1 
  - git rebase origin/pooh-version
  - git reflog : 추가로 푸시하려고 했던 커밋을 찾아내기
  - git cherry-pick <커밋아이디> : 추가하려고 했던 커밋 아이디를 체리픽
- 상세 설명
  - 현재 리모트 기준으로 HEAD + 1 까지 진행된 상태에서, 로컬의 HEAD와 리모트의 HEAD가 불일치된 상태
  - 그런데, 그 불일치 상태에서 추가적인 commit이 진행된 상태에서 push를 하려고 해서 문제 발생
  - 따라서, HEAD~1까지 되돌린후에 리모트의 HEAD를 적용한 후에,
  - 현재의 commit을 적용해야하는 것임

---
### 로컬의 커밋을 날려먹었을때
`git reflog`를 사용하면 커밋 아이디를 확인할수 있음
`git cherry-pick`를 이용하여 가져오면 됨.
```
$ git reflog
8fd79d7 (HEAD -> pooh-version, origin/pooh-version) HEAD@{0}: cherry-pick: fixup;
bc5852b HEAD@{1}: rebase (finish): returning to refs/heads/pooh-version
bc5852b HEAD@{2}: rebase (start): checkout origin/pooh-version
28fbb3b (origin/main, origin/HEAD, main) HEAD@{3}: reset: moving to HEAD~1
bc5852b HEAD@{4}: reset: moving to HEAD
bc5852b HEAD@{5}: reset: moving to HEAD
bc5852b HEAD@{6}: reset: moving to origin/pooh-version
28fbb3b (origin/main, origin/HEAD, main) HEAD@{7}: reset: moving to HEAD
28fbb3b (origin/main, origin/HEAD, main) HEAD@{8}: reset: moving to HEAD~2
37017b9 HEAD@{9}: rebase (finish): returning to refs/heads/pooh-version
37017b9 HEAD@{10}: rebase (reword): fixup
b3d7c55 HEAD@{11}: rebase: fast-forward
6443037 HEAD@{12}: rebase (start): checkout HEAD~2
b3d7c55 HEAD@{13}: commit: fixup;
6443037 HEAD@{14}: reset: moving to HEAD
6443037 HEAD@{15}: reset: moving to HEAD~1
2d482e7 HEAD@{16}: cherry-pick: fixup
6443037 HEAD@{17}: reset: moving to HEAD~1
dd83300 HEAD@{18}: reset: moving to HEAD
dd83300 HEAD@{19}: commit: fixup
6443037 HEAD@{20}: reset: moving to HEAD
```
---
### github 계정 꼬였을때
ERROR: Permission to poohgithub/poohnet-pow.git denied to jay-hyunjaelee.
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.

- ~/.gitconfig에 emial 설정 에서 equal sign 양 옆의 스페이스 없애기
- 재부팅하기 

---
### error: cannot run delta: No such file or directory
- git lg 실행시 발생
- brew install git-delta.

---
### git submodule update 에러 발생시 
```
git rm --cached path_to_submodule
Edit .gitmodules File
Edit .git/config File
rm -rf .git/modules/path_to_submodule
git commit -am "Removed submodule"
git push
```

---
### 내가 올린 브랜치에 대해서 자동으로 PR추천을 할수 있도록 하기.
- Organization의 해당 리파지토리로 이동
- Settings -> General 이동
- Always suggest updating pull request branches 를

--- 
### Merge pull request 발생하지 않도록 Full Requests 설정
- Repository Setting -> Pull Requests
  - Uncheck: "Allow merge commits", "Allow squash merging" 

---
### 기타 정리
- git reset --hard michael/add-npm-script-prettier
	git remote update 한번 해줘야 함.
	해당 브랜치로 들어가서 최신 버전으로 갱신하기 
- git pull <remote> <remote branch>
	로컬의 수정을 반영하기
	ex) git pull zero commons-budget-contract
- git rebase 도중 파일 제거하기
	git rm --cached <file>  
- git rebase 도중 stage된 파일 리셋하기
	git reset HEAD~1 -- package.json
- revert
	※ This will create three separate revert commits:
		§ git revert a867b4af 25eee4ca 0766c053
	※ It also takes ranges. This will revert the last two commits:
		§ git revert HEAD~2..HEAD
	※ Similarly, you can revert a range of commits using commit hashes (non inclusive of first hash):
		§ git revert 0d1d7fc..a867b4a
- git clone시 폴더명 지정
	git clone git@github.com:whatever folder-name
- Fatal: Not possible to fast-forward, aborting
	git pull --rebase.

- git diff --name-only HEAD~1 HEAD~2
- git log with graph
git log --graph --format=format:'%C(bold blue)%h%C(reset) - %C(bold green)(%ar)%C(reset) %C(white)%an%C(reset)%C(bold yellow)%d%C(reset) %C(dim white)- %s%C(reset)' --all

😈 private repo clone
- $ key-gen
- $ eval "$(ssh-agent -s)"
- $ ss-add .ssh/id_rsa_graph_node
- id_rsa_graph_node.pub를 cat해서 리파지토리 Setting -> Deploy keys에 추가
- git clone git@github.com:bosagora/boa-space-graph-node.git
    
😈 Organization만들고, 포크하기 (fork)
poohgithub organization에서 Setting->Members privileges->Allow forking of private repositories.

-------
## Mac
🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※

### MacVim을 Spotlight에서 보도록 하기
For those with Yosemite and MacVim from homebrew not showing up in Spotlight, using an alias works.

(Be sure to delete any MacVim that is already in /Applications.)

From the Terminal:

Uninstall existing: brew uninstall macvim
Install latest: brew install macvim
Open directory in Finder. Ex: open /usr/local/Cellar/macvim/7.3-64
In Finder, right-click on the MacVim.app icon and select "Make Alias".
Copy the alias you just created to the /Applications folder.
Spotlight will index the MacVim alias.

Source: https://github.com/Homebrew/homebrew/issues/8970#issuecomment-4262695

---
### Mac Spotlight에서 특정 애플리케이션 찾지 못할 때
First, turn off Spotlight:
sudo mdutil -a -i off

Next, unload the metadata file that controls Spotlight's index:
sudo launchctl unload -w /System/Library/LaunchDaemons/com.apple.metadata.mds.plist
여기서 에러날 수 있음 그냥 무시하고 다음으로 넘어감.

The following command re-loads the index:
sudo launchctl load -w /System/Library/LaunchDaemons/com.apple.metadata.mds.plist

Finally, turn Spotlight back on:
sudo mdutil -a -i on

---
### Mac에서 Sublime Text를 커맨트창에서 실행시키기
```
ln -s "/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl" /usr/local/bin/subl
```

-------
## vi
🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※

### 줄번호
```
:set number
:set nu
```

없애기는 아래와 같이
```
:set number!
:set nu!
```

### files 파일 만들기
find . -type f -not -path .*/node_modules/* -not -path .*/.git/* -not -path .*/venv/* > files

find ./ -type f > files
find . -type file -name '*.js' -o -name '*.json' > files  //-o는 or를 뜻함
find . -type f -not -path './node_modules/*' -not -path './chaindata/*' > files

open file: ctrl w, ctrl f

---
### basics

g t: Next tab, 그냥 에디터에서 g와 t를 치면 됨
g T: Prior tab
nnn g t: Numbered tab, nnn은 숫자를 나타냄, 1일수도 있고, 12일수도 있음.

"*yy           ; copt from vi 
:! wc          ; sh command in vi

:shell 혹은 :sh를 이용해서 shell(:12)로 빠져나갈 수 있다. exit 혹은 Ctrl+D를 이용해서 vim으로 되돌아올 수 있다.
:! # 마지막 커맨드의 결과보기 

mvim --remote-tab-silent search.go  // 같은 윈도우에서 열기

---
### Move cursor to end of file in vim
```
:$
```

---
### 한글 깨지는 문제
set enc=utf-8

---
### vimrc (~/.vimrc)
set nocompatible
filetype off
set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()
Plugin 'gmarik/Vundle.vim' "required
Plugin 'tpope/vim-fugitive' "required 
call vundle#end()
filetype plugin indent on " Put your non-Plugin stuff after this line
:w
:source %
:PluginInstall
syntax enable " syntax highlighting
set nu " add line numbers
set smartindent " make smart indent
set tabstop=4 " tab width as 4 (default 8)
set shiftwidth=4
set softtabstop=4       ; TAB키를 눌렀을때 몇 칸을 이동?
set tabstop=4           ; 하나의 TAB을 몇 칸으로 인식? 
set number		            ;  Line Number
set expandtab " spaces for tab
set incsearch
set mouse=a

-------

## AWS
🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※

---
### AWS 가격표
참고: https://aws.amazon.com/ec2/pricing/on-demand/

| name      | hourly | vCPU | Memory | Storage | Network performance |
| --------- | ------ | ---- | ------ | ------- | ------------------- |
| t3.small  | $0.026 | 2    | 2 GiB  | EBS     | Up to 5 Gigabit     |
| t3.medium | $0.052 | 2    | 4 GiB  | EBS     | Up to 5 Gigabit     |
| t3.large  | $0.104 | 2    | 8 GiB  | EBS     | Up to 5 Gigabit     |

---
### AWS에 Load Balancer 추가시 
• Certifacate Manager를 통해서 도메인 추가
	- "Create records in Route 53" 해줘야 함.

---
### node3에 들어가서 postgresql 도커 접속방법
sudo docker exec -it ec22f5036e09 bash
psql -d db -U postgres -W

---
### WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!
Add correct host key in /Users/hyunjaelee/.ssh/known_hosts to get rid of this message.

---
### public key 확인 및 깃헙에 추가하기
- `cat .ssh/id_rsa_linked0.pub`
- 계정의 세팅으로 들어가면 `SSH and GPG keys`에 집어넣으면 됨.
- git clone할 때 sudo를 넣어야 `Load key … : Permission denied` 에러가 발생하지 않음.
- `git clone https://github.com/linked0/agora.git` 이건 잘되는 ssh로 받을때 안됨

---
### 접속
```
ssh -i "pooh-seoul.pem" ubuntu@ec2-52-79-227-164.ap-northeast-2.compute.amazonaws.com
```

---
### AWS에서 파일 전송 
* 가져오기
```
scp -i ~/pooh/pooh-seoul.pem ubuntu@ec2-52-78-204-156.ap-northeast-2.compute.amazonaws.com:~/share/test.txt .
```
* 보내기
```
scp -i ~/pooh/pooh-seoul.pem test.txt ubuntu@ec2-52-78-204-156.ap-northeast-2.compute.amazonaws.com:~/share/test.txt
```

---
### Load Balancer 
- Mappings는 모든 존으로
- Security Group은 AgoraDevNet_ELB
- 리스너 지정: Target Group지정
- 나중에 80에 대해서 443으로 Redirect

---
### URL로 접근이 안되는 문제
- 실패상황황인데, CNAME과 A 설정만 맞으면 될 것 같음 (230303)

---
### Target Group
- Basic configuration: Instances
- Protocol/Port 지정
- Protocol version: HTTP1
- Health checks는 그대로 두면 됨.

---
### AWS 타임존 변경
```shell
$tzselect
```
.profile에 다음을 추가하고 재로그인
```
TZ='Asia/Seoul'; export TZ
```
-------
## Know
 
🌟🏓🦋⚾️🐳🍀🌼🌸🏆🍜😈🐶🦄☕️🚘※

### Memo Google Docs
- bit.ly/44TH7Ua : Memo Pub
- bit.ly/357Is0p : Memo

### 예상치 못한 컴파일 에러가 나올때
- brew update && brew upgrade

### Generate Private Key
openssl ecparam -name secp256k1 -genkey -noout

### Mac XCode
brew install macvim --override-system-vim

https://developer.apple.com/download/more/?=command%20line%20tools 에서 다운로드 필요
xcode-select install
sudo xcode-select --switch /Library/Developer/CommandLineTools

### source를 다른 위치에 new_source라는 이름으로 복사(두가지 방법)
cp -a source ~/temp/new_source

find . -iname mainview*
touch -t "201610041200" timestamp
find . -type f -newer timestamp

sudo xcode-select -s /Applications/XCode7.2/Xcode.app/
To clear the terminal manually: Cmd + K
ps aux | grep chrome

-------
## 단축키
🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸
🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸
🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸
🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸
🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸
🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸
🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸
🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸🌸

### 🌸 Google docs
* Indentation 수정
Format - Align & Indent - Indentation Option에서 Hanging 수정하면 됨

### 🌸 poohnet (EL/CL) 실행하기
😈 geth compile
```
brew install golang
go run build/ci.go install -static ./cmd/geth or make geth
sudo cp ./build/bin/geth /usr/local/bin/geth
```
😈 EL
- ./init 치면 help 나옴
- ./enode 치면 help 나옴

😈 CL
1. 블럭해시과 genesis time(date +%s)을 chain-config 반영하고 eth2-testnet-genesis 실행
    - gen_genesis
    - zcli pretty bellatrix  BeaconState genesis.ssz > parsedState.json로 Validators Root 가져오기
    - settings.py에 GENESIS_VALIDATORS_ROOT에 추가, 근데 이건 거의 안 바뀜.
2. staking-deposit-cli로 wallet 만들기
    - sudo ./deposit.sh install, 만약 longinterpr.h 에러 발생하면 아래 실행
        - python3.10 -m venv py310
        - source py310/bin/activate
    - ./deposit.sh existing-mnemonic
3. 첫번째 cnode 실행하고 enr 알아내서 bootstrap-node
    - cl은 el과 연동되므로 init할 필요 없음
    - poohprysm 루트폴더의 cnode로 실행.
4. 나머지 cl 실행시키기
5. keys &validators 실행
    - poohprysm 루트폴더에서 찾아야 함.

😈 
- 그냥 로컬로 실행할때
```
poohgeth/poohnet$ ./enode-config
```

- 간단하게 testnet으로 실행할때
```
poohgeth/poohnet$ ./enode pow el1
```

---
### 🌸 .bash_profile - git push config
```
export PS1="\W \u$ "

export PATH=$PATH:"/Applications/IntelliJ IDEA.app/Contents/MacOS"

hgrep() {
	grep -irnH --include=*.$1 "$2" ./  
}
pp() {
  code ./$1
}
ch() {
  chatgpt $@
}

alias ppd='code ~/work/web/dev.md'
alias ppd1='code ~/work/web/sub/solidity.md'
alias ppd2='code ~/work/web/sub/voca.md'
alias ppp='code ~/work/web/ex/package.json'
alias pph='code ~/work/web/ex/hardhat.config.ts'
alias ppe='code ~/work/web/ex/.env'
alias ppo='code ~/work/web/ex/contracts/Ondo.sol'
alias ppt='code ~/work/web/ex/test/ondo.spec.ts'
alias ppz='code ~/.zshrc'

alias rrp='code ./package.json'
alias rrh='code ./hardhat.config.ts'
alias rre='code ./.env'
alias rrm='code ./README.md'

alias lsc='ls -al ~/work/web/ex/contracts'
alias lss='ls -al ~/work/web/ex/scripts'
alias lst='ls -al ~/work/web/ex/test'

alias ccc='cat ~/.zshrc'
alias zzz='. ~/.zshrc'
alias viz='vim ~/.zshrc'
alias vid='vim ~/work/web/dev.md'
alias web='cd ~/work/web'
alias exx='cd ~/work/web/ex'

alias cb="curl -L bit.ly/3MT0VRb"
alias cbb="open https://bit.ly/3MVG5AN"
alias poo="ssh -i ~/pooh/tednet.pem ubuntu@3.37.37.195"

alias ecstart="aws ec2 start-instances --instance-ids i-02c89e86234e05850"
alias ecstop="aws ec2 stop-instances --instance-ids i-02c89e86234e05850"
```


**명령어 하나로 git commit과 push**
.gitconfig에 다음 추가하고 vi종료하면 바로 적용됨
```
[alias]
    cmp = "!f() { git add -A && git commit -m \"$@\" && git push; }; f"
```
```
git cmp 'update'
```

아래도 방법
```
git config alias.acp '! git commit -a -m "commit" && git push'
```
그리고 나서 git acp 하면됨


---
### 🌸 hardhat 프로젝트 만들기 🌸
Hardhat은 기존 프로젝트에서는 안됨.
```
yarn init -y (=npm init -y)
yarn add --dev hardhat
npx hardhat // 여기서 이미 필요한 package는 추가됨

yarn add -D dotenv ethers @nomicfoundation/hardhat-toolbox hardhat-deploy @openzeppelin/contracts "@nomicfoundation/hardhat-chai-matchers@^2.0.0" "@nomicfoundation/hardhat-ethers@^3.0.0" "@nomicfoundation/hardhat-network-helpers@^1.0.0" "@nomicfoundation/hardhat-verify@^2.0.0" "@typechain/ethers-v6@^0.5.0" "@typechain/hardhat@^9.0.0" "@types/chai@^4.2.0" "@types/mocha@>=9.1.0" "chai@^4.2.0" "hardhat-gas-reporter@^1.0.8" "solidity-coverage@^0.8.1" "typechain@^8.3.0" 
```

🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀
🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀
🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀
🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀
🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀
🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀
🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀
🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀🍀

### 🌸 Command

**tar**
```
tar --exclude='node_modules' -cvzf bccard.tar.gz bccard
tar -xvzf xxx.tar.gz -C ./data

여러 sub directory에 node_modules를 제거함.
tar --exclude='*/node_modules' --exclude='.git' -cvzf ~/temp/pooh-tools.tar.gz .
```

opt cmd b - Bookmark

ssh-keygen -t rsa

```
brew install golang
`PATH=$PATH:$HOME/go/bin`
```

go install github.com/protolambda/zcli@latest
zcli --help
alias nd1="ssh -i ~/pooh/tednet.pem ubuntu@13.209.149.243"

**하위 동일 폴더 지우기**
```
find . -type d -name 'temp' -exec rm -rf {} +
```

**alias/export 추가**
```
echo 'export PATH=/usr/local/bin:$PATH' >> ~/.bash_profile
echo 'alias cb="curl -L bit.ly/3MT0VRb"' >> ~/.zshrc
```

**hidden files**
```
    Command + Shift + . (period key)
```

**iterm 단축키**
```
Next split: cmd + ]
Split Vetically: cmd + d
Split Horizontally: shft + cmd + d
```
---
### 🌸 Mac
- Finder에서 파일 경로 복사하기 
```
1. Control-click or right-click on the file in Finder.
2. Press the Option (Alt) key.
3. Choose 'Copy [filename] as Pathname'
```

- 테이블의 셀에서 개행
option + enter


---
### 🦋 Colab 🦋
**열기**
- [colab.google](https://colab.google)로 이동
- "Open Colab" 버튼 클릭
- "노트 열기" 팝업에서 Google Drive -> aplay.ipynb 
- 아니면 깃헙 web 리파지토리의 [aploy.ipynb](https://colab.research.google.com/github/linked0/web/blob/master/pooh/aplay.ipynb) <- 여기에 pyplot 코드 있음

**실행**
- MyDrive/colab/data 연결 가능 (코드에 있음)
- MyDrive/colab/data/test.txt를 가지고 처리하는 코드도 있음
  
---
### 🦋 VSCode I 🦋
- Prettier 세팅
  - .prettierrc.json 파일 생성
    ```
    {
      "tabWidth": 2,
      "printWidth": 80,
      "overrides": [
        {
          "files": "*.sol",
          "options": {
            "printWidth": 80,
            "tabWidth": 2,
            "useTabs": false,
            "singleQuote": false,
            "bracketSpacing": false,
            "explicitTypes": "always"
          }
        }
      ]
    }
    ```
  - settings.json 파일 열어서 아래 세팅(Default 말고 User용 열어야 함)
    ```
    "editor.formatOnSave": true,
    ```


**정규표현식 SEARCH**
```
_IMPLENENTATION_SLOT
_IMPLENENTATION_APPLT
_IMPLENENTATION_APPLE
```
위 리스트에서 첫 두개의 스트링만 찾고 싶을때
```
_[A-Z]*NENTATION_[A-Z]*T
```

---
### 🌸 Block projects
Sepolia: 579fca7e3f10489b83c047f5cc17bec5
Pooh Admin: 0x58984b2bf6f0f3de4f38290ed3c541ac27bac384b378073ab133af8b314a1887
Jay Test: 0x7184281c677db98212c216cf11e47a4e9ec8f4b6932aa5d2d902b943ad501d23

---
🌺🌺🌺🌺🌺🌺🌺🌺🌺🌺🌺🌺🌺🌺🌺🌺🌺🌺🌺🌺🌺🌺
### 🌺🌺🌺🌺🌺🌺 latest forge 🌺🌺🌺🌺🌺🌺
```
yarn cache clean --force

vm.expectRever(
  abi.encodeWithSelector(
    Raffle.Raffle__UpkeepNotNeeded.selector,
      ...
    )
} 

vm.recordLogs();
Vm.Log[] memory entries = vm.getRecordedLogs();

forge sanpshot -m testWithrawFromMultipleFunders
```

```
vm.txGasPrice(GAS_PRICE);
uint256 gasStart = gasleft();

uint256 gasEnd = gasleft();
uint256 gasUsed = (gasStart - gasEnd) * tx.gasprice;
```

```
forge inspect FundMe storageLayout
cast storage 0x...(Contract address) 써보기
cast --to-wei 15
cast balance 0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045
배포 스크립트 실행시에는 --broadcast를 써야 함.

cast --calldata-decode "fund()" 0xa7ea5e4e

파이선 인터프러터 모드 같은 것.
chisel - Test and receive verbose feedback on Solidity inputs within a REPL environment.
```

🌼🌼🌼🌼🌼🌼🌼🌼🌼🌼🌼🌼🌼🌼🌼🌼🌼🌼
### 🌼🌼🌼🌼 latest hardhat 🌼🌼🌼🌼
**기타: reset array 등**

```
uint16 타입도 있음.

constructor (..., vrfCoordinator, ...) VRFConsumerBaseV2(vrfCoordinator) {
...
}

% 연산자도 있음.

address payable winner = s_players[indexOfWinner];

resetting!
s_players = new address payable[](0);

event WinnerPicked(address indexed winner);
This allows these parameters to be searchable when looking through the blockchain logs. 
```

**abi.decode**
```
function addPerson(bytes calldata data) external {
    // Assuming `data` is ABI-encoded with (string, uint8)
    (string memory name, uint8 age) = abi.decode(data, (string, uint8));

    // Store the information in the contract's state
    people[msg.sender] = Person(name, age);

    // Emit an event to log the addition
    emit PersonAdded(msg.sender, name, age);
}
```

**slot.value**
```
function upgrade(address implementation_) external virtual {
    require(_isValidSigner(msg.sender), "Caller is not owner");
    require(implementation_ != address(0), "Invalid implementation address");
    ++state;
    StorageSlot.getAddressSlot(_IMPLEMENTATION_SLOT).value = implementation_;
}
```

**Promise.all && map**
```
await Promise.all(Array.from({ length: 14 }, (_, i) => i).map((i) => claimTopicsRegistry.addClaimTopic(i)));
```

**signMessage**
```
// 이건 ethers v5용이라 참고용
claimForBob.signature = await claimIssuerSigningKey.signMessage(
  ethers.utils.arrayify(
    ethers.utils.keccak256(
      ethers.utils.defaultAbiCoder.encode(['address', 'uint256', 'bytes'], [claimForBob.identity, claimForBob.topic, claimForBob.data]),
    ),
  ),
);

// ethers v6
const signature = await signer.signMessage(
  ethers.toBeArray(
    ethers.solidityPackedKeccak256(
      ["bytes32", "address", "uint256"],
      [
        SIGNATURE_DELEGATION_HASH_TYPE,
        delegates[index]!.address,
        endTimestamp,
      ],
    ),
  ),
);
```

**참고할 내용 많음**
```
function cheaperWithdraw() public onlyOwner {
    address[] memory funders = s_funders;
    // mappings can't be in memory, sorry!
    for (uint256 funderIndex = 0; funderIndex < funders.length; funderIndex++) {
        address funder = funders[funderIndex];
        s_addressToAmountFunded[funder] = 0;
    }
    s_funders = new address[](0);
    // payable(msg.sender).transfer(address(this).balance);
    (bool success,) = i_owner.call{value: address(this).balance}("");
    require(success);
}
```

**CALLDATA**
```
CALLDATACOPY(t, f, s): msg.data 의 f번째 위치에서 s개의 바이트를 읽어 메모리의 t번째 위치에 저장합니다.
create2(
  callvalue(), // wei sent with current call
  // Actual code starts after skipping the first 32 bytes
  add(bytecode, 0x20),
  (bytecode), // Load the size of code contained in the first 32 bytes
   _salt // Salt from function arguments
)
```

**Make sure that we can transfer out token 200**
```
vm.prank(owner4);
IERC6551Executable(account4).execute(
    address(account3),
    0,
    abi.encodeWithSignature(
        "execute(address,uint256,bytes,uint8)",
        address(nft),
        0,
        abi.encodeWithSignature(
            "safeTransferFrom(address,address,uint256)", account3, newTokenOwner, 200
        ),
        0
    ),
    0
);

function callTransfer(address _token, address _to, uint256 _amount) external {
    // This will encode the function call to `transfer(address,uint256)` with the specified arguments
    bytes memory data = abi.encodeWithSignature("transfer(address,uint256)", _to, _amount);
    // Making the actual call to the token contract's transfer function
    (bool success, ) = _token.call(data);
    require(success, "Transfer failed");
}
```

**Nick's Factory**
```
The registry MUST be deployed at address 0x000000006551c19487814612e58FE06813775758 using Nick’s Factory (0x4e59b44847b379578588920cA78FbF26c0B4956C) with salt 0x0000000000000000000000000000000000000000fd8eb4e1dca713016c518e31.
The registry can be deployed to any EVM-compatible chain using the following transaction:

{
        "to": "0x4e59b44847b379578588920ca78fbf26c0b4956c",
        "value": "0x0",
        "data": "0x0000000000000000000000000000000000000000fd8eb4e1dca713016c518e31608060405234801561001057600080fd5b5061023b806100206000396000f3fe608060405234801561001057600080fd5b50600436106100365760003560e01c8063246a00211461003b5780638a54c52f1461006a575b600080fd5b61004e6100493660046101b7565b61007d565b6040516001600160a01b03909116815260200160405180910390f35b61004e6100783660046101b7565b6100e1565b600060806024608c376e5af43d82803e903d91602b57fd5bf3606c5285605d52733d60ad80600a3d3981f3363d3d373d3d3d363d7360495260ff60005360b76055206035523060601b60015284601552605560002060601b60601c60005260206000f35b600060806024608c376e5af43d82803e903d91602b57fd5bf3606c5285605d52733d60ad80600a3d3981f3363d3d373d3d3d363d7360495260ff60005360b76055206035523060601b600152846015526055600020803b61018b578560b760556000f580610157576320188a596000526004601cfd5b80606c52508284887f79f19b3655ee38b1ce526556b7731a20c8f218fbda4a3990b6cc4172fdf887226060606ca46020606cf35b8060601b60601c60005260206000f35b80356001600160a01b03811681146101b257600080fd5b919050565b600080600080600060a086880312156101cf57600080fd5b6101d88661019b565b945060208601359350604086013592506101f46060870161019b565b94979396509194608001359291505056fea2646970667358221220ea2fe53af507453c64dd7c1db05549fa47a298dfb825d6d11e1689856135f16764736f6c63430008110033",
}
```

**assembly 구조**
```
# Asssembly 구조
// Memory Layout:
// ----
// 0x00   0xff                           (1 byte)
// 0x01   registry (address)             (20 bytes)
// 0x15   salt (bytes32)                 (32 bytes)
// 0x35   Bytecode Hash (bytes32)        (32 bytes)
// ----
// 0x55   ERC-1167 Constructor + Header  (20 bytes)
// 0x69   implementation (address)       (20 bytes)
// 0x5D   ERC-1167 Footer                (15 bytes)
// 0x8C   salt (uint256)                 (32 bytes)
// 0xAC   chainId (uint256)              (32 bytes)
// 0xCC   tokenContract (address)        (32 bytes)
// 0xEC   tokenId (uint256)              (32 bytes)

// Silence unused variable warnings
pop(chainId)

// Copy bytecode + constant data to memory
calldatacopy(0x8c, 0x24, 0x80) // salt, chainId, tokenContract, tokenId
mstore(0x6c, 0x5af43d82803e903d91602b57fd5bf3) // ERC-1167 footer
mstore(0x5d, implementation) // implementation
mstore(0x49, 0x3d60ad80600a3d3981f3363d3d373d3d3d363d73) // ERC-1167 constructor + header

// Copy create2 computation data to memory
mstore8(0x00, 0xff) // 0xFF
mstore(0x35, keccak256(0x55, 0xb7)) // keccak256(bytecode)
mstore(0x01, shl(96, address())) // registry address
mstore(0x15, salt) // salt

// Compute account address
let computed := keccak256(0x00, 0x55)

// If the account has not yet been deployed
if iszero(extcodesize(computed)) {
    // Deploy account contract
    let deployed := create2(0, 0x55, 0xb7, salt)

    // Revert if the deployment fails
    if iszero(deployed) {
        mstore(0x00, 0x20188a59) // `AccountCreationFailed()`
        revert(0x1c, 0x04)
    }

    // Store account address in memory before salt and chainId
    mstore(0x6c, deployed)

    // Emit the ERC6551AccountCreated event
    log4(
        0x6c,
        0x60,
        // `ERC6551AccountCreated(address,address,bytes32,uint256,address,uint256)`
        0x79f19b3655ee38b1ce526556b7731a20c8f218fbda4a3990b6cc4172fdf88722,
        implementation,
        tokenContract,
        tokenId
    )

    // Return the account address
    return(0x6c, 0x20)
}

// Otherwise, return the computed account address
mstore(0x00, shr(96, shl(96, computed)))
return(0x00, 0x20)

```
---
🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟
### 🌟🌟🌟🌟🌟🌟 git submodule 🌟🌟🌟🌟🌟🌟


😈 git submodule add 
```
git submodule add https://github.com/example/lib.git external/lib
git submodule update --init
```
😈 git submodule remove
```
git rm --cached poohgeth // path는 .gitmodules 파일의 참고
code .gitmodules File // poohgeth 항목 제거
code .git/config File // poohgeth 항목 제거
rm -rf .git/modules/poohgeth
rm -rf poohgeth // 안되면 sudo
git commit -am "Removed submodule"
git push
```
😈 git submodule update
```
git submodule update --remote
```
😈 하나만 다운로드 할때
```
git submodule update --init --recursive web2 
```
---
### 🦋 VSCode II 🦋
- Command Palette: [⇧⌘P ] Shell command
- Settings 열기: cmd + ,
- 현재 프로젝트에서 검색: shift + option + f (마우스 오르쪽 버튼으로 한번 클릭후)
---
- back: ctrl - , forward: shift ctrl -
- ctrl tab: recent files
- shift cmd n - cmd shift /: open project
- ctrl `: goto terminal
---
- Cmd+Shift+]: Move to previous terminal
- Cmd+shift+[: Move to next terminal
- ctrl shift ₩ : new terminal
- Bigger Font: cmd + "+"

---
### 🌸 Whale 듀얼탭-Docker-Screen
**Whale**
- 듀얼 탭 열기/닫기: shift + cmd +  s
- 탭 포커스 이동: shift + cmd +  e
- 듀얼 탭에 링크 열기: shift + cmd + click

**Docker**
- docker exec -it pow-node geth attach http://localhost:8545
- docker logs pow-node // enode 알아낼때 사용할 수 있음
- docker run --name postgresql \
    -e POSTGRES_USER=postgres -e POSTGRES_PASSWORD=password \
    -p 5432:5432 \
    -d postgres:latest

**Screen**
- screen -ls // ls
- ctrl a+d // exit
- screen -S el1  -X quit
- screen -r -d 17288 <-- attatch되어 있는 것 detach

---
### 🌸 curl
Post
```
curl -d '{"address":"0x1666186e21F3c130fF15a6c2B0b1BbC4F6689B3F"}' -H "Content-Type: application/json" -X POST http://localhost:3000/mint
```
Get
```
curl -d '{"address":"0x1666186e21F3c130fF15a6c2B0b1BbC4F6689B3F"}' -H "Content-type: application/json" -X GET "http://localhost:3000/balanceOf"
```

---
### 🌸 텍스트 검색 - 프로세스 찾기 - zip
```
egrep -irnH --include=\*.cpp --exclude-dir=.svn 'beacon.pntbiz.com' ./

ps aux | grep postgres

zip -r ~/temp/my-archive.zip . -x '*.git*' -x '*node_modules*'

unzip my-archive.zip -d data //data 폴더에 풀고 싶을때.

history -100
```

---
- [solidity](./sub/solidity.md)
- [voca](./sub/voca.md)
- https://bit.ly/3MT0VRb
- https://bit.ly/3MVG5AN
- dev.doc: https://bit.ly/3t6oyyG

