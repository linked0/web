0. ê¸°ë³¸ ì„¸íŒ…
- go
sudo rm -rf /usr/bin/go
sudo rm -rf /usr/local/go
wget https://go.dev/dl/go1.21.0.linux-amd64.tar.gz
sudo tar -C /usr/local -xzf go1.21.0.linux-amd64.tar.gz
add â€œexport PATH=$PATH:/usr/local/go/bin:$HOME/go/binâ€ to ./zshrc

- nvm install & use
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.4/install.sh | bash
source ~/.bashrc  
nvm install 16 && nvm use 16
npm install -g npm@9.8.1 @bazel/bazelisk

- poohgeth compile
./compile

- poohprysm compile
bazel build //cmd/beacon-chain:beacon-chain --config=release
bazel build //validator:image_bundle --config=release

1. gethë¥¼ ìƒˆë¡œìš´ configë¡œ ì‹¤í–‰
- ì¼ë‹¨ ì´ê²ƒìœ¼ë¡œ ì„¤ê³µì„ í•˜ë©´ ì¼ë‹¨ ëŒì§€ ì•Šê³ ì„œ ëŒ€ê¸°í•˜ê³  ìˆì„ ê²ƒì„

2.  genesis ë§Œë“¤ê¸°
- vi poohprysm/poohnet/config/chain-config.yaml
-Â MIN_GENESIS_ACTIVE_VALIDATOR_COUNT: 8
- MIN_GENESIS_TIME: ì›í•˜ëŠ” consensus layer genesis time
    - date +%sìœ¼ë¡œ í˜„ì¬ ì‹œê°„ì„ ì–»ì–´ì™€ì„œ í•œ 600(10ë¶„)ì„ ë”í•œë‹¤.
    - ğŸ”¥ í•œë²ˆ ì„¸íŒ…ì´ ëœ í›„ì— ë‹¤ì‹œ ì—¬ëŸ¬ë²ˆ ì‹œë„í• ë•Œ ì´ ë¶€ë¶„ë§Œ ì„¸íŒ…í•˜ê¸° ë‹¤ì‹œ í•˜ë©´ë¨
- SHARDING_FORK_VERSION, SHARDING_FORK_EPOCH ì£¼ì„ ì²˜ë¦¬í•¨
- TERMINAL_BLOCK_HASH ì§€ì •
    - el nodeì—ì„œ "eth.getBlockByNumber(0)"ë¥¼ í†µí•´ì„œ "hash" í•­ëª©ì„ ê°€ì ¸ì˜´.

3. gen_genesis ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ì—¬ CLìš© genesis íŒŒì¼ì„ ë§Œë“ ë‹¤.
- compile with "make build" on "eth2-testnet-genesis" folder
- "gen_genesis" on "poohnet" folder
- install "zcli"
go install github.com/protolambda/zcli@latest
- get "Genesis Validators Root" with following command on "poohnet" folder.
zcli pretty bellatrix  BeaconState config/genesis.ssz > parsedState.json
- find "genesis_validators_root" on "parsedState.json" file
- copy the value of "genesis_validators_root" to the following part of setting.py
ê·¼ë° ê±°ì˜ ë°”ë€Œì§€ ì•ŠìŒ. --> ì™œëƒë©´ mnemonicì€ ê·¸ëŒ€ë¡œ ì“°ê¸° ë•Œë¬¸ì—.
TestnetSetting = BaseChainSetting(
NETWORK_NAME=TESTNET, GENESIS_FORK_VERSION=bytes.fromhex('2F1C0000'),
GENESIS_VALIDATORS_ROOT=bytes.fromhex('e63460dc044e056f26ca8f7406a18867d31f1ec195322f428b5918d4b0153050'))

4. staking-deposit-cli
- cd poohprysm/poohnet/pooh-deposit-cl
- python 3.10 env
sudo apt-get update
sudo apt-get install python3.10-dev
sudo apt install python3.10-venv
python3.10 -m venv py310
source py310/bin/activate (deactivate after all things done)
- sudo ./deposit.sh install 
- export PYTHONPATH=$PYTHONPATH:/home/ubuntu/poohprysm/poohnet/pooh-deposit-cli
- ./deposit.sh existing-mnemonic

- ìœ„ì—ì„œ ìƒì„±ëœ í‚¤ ë³µì‚¬í•˜ê¸°
- cd poohprysm
- sudo rm -rf /home/ubuntu/.eth2validators/prysm-wallet-v2
- ./keys (ì•”í˜¸:pooh2023!@)
- ~/.pooh/cl/config í´ë” ìƒì„±
mkdir -p $HOME/.pooh
mkdir -p $HOME/.pooh/cl
mkdir -p $HOME/.pooh/cl/config
cp -rf ./poohnet/config/* $HOME/.pooh/cl/config
- sudo vi ~/.pooh/cl/config/password.txt, ì•”í˜¸ ì¶”ê°€

5. cl ì‹¤í–‰
- cd poohprysm
- ./cnode: 
- ì²«ë²ˆì§¸ clì˜ enrì„ ì•Œì•„ë‚´ì„œ ë‹¤ë¥¸ cnode ìŠ¤í¬ë¦½íŠ¸ì˜ bootstrap-node í•­ëª©ì— ì„¸íŒ…í•˜ê¸° 




ğŸ BootNodeì— ëŒ€í•´ì„œ ê°œë… íŒŒì•…
ì‚¬ìš©í• ìˆ˜ ìˆëŠ” mnemonicì— ëŒ€í•´ì„œ ì°¾ì•„ë³´ê¸° 

   * Gas and return values during simulation.
   * @param preOpGas         - The gas used for validation (including preValidationGas)
   * @param prefund          - The required prefund for this operation
   * @param sigFailed        - ValidateUserOp's (or paymaster's) signature check failed
   * @param validAfter       - First timestamp this UserOp is valid (merging account and paymaster time-range)
   * @param validUntil       - Last timestamp this UserOp is valid (merging account and paymaster time-range)
   * @param paymasterContext - Returned by validatePaymasterUserOp (to be passed into postOp)
   */
  struct ReturnInfo {
    uint256 preOpGas;
    uint256 prefund;
    bool sigFailed;
    uint48 validAfter;
    uint48 validUntil;
    bytes paymasterContext;
  }

  
contract ExampleContract {
    struct ValueData {
        string name;
        uint256 value;
    }

    function getData(string calldata _name) public view returns (ValueData memory) {
        bytes32 nameSlot = keccak256(abi.encodePacked(_name));
        bytes32 valueSlot = keccak256(abi.encodePacked(_name, uint256(0)));

        ValueData memory _data;
        bytes memory gottonName;
        uint256 value;
        uint256 nameLength;

        assembly {
            // Load the length of the name from storage
            nameLength := sload(nameSlot)

            // Allocate memory for the gottonName
            gottonName := mload(0x40)
            mstore(gottonName, nameLength)
            
            // Calculate where the free memory will be after gottonName
            let strPtr := add(gottonName, 0x20)
            mstore(0x40, add(strPtr, nameLength))

            // Read the string data from storage
            let dataSlot := add(nameSlot, 1)
            for { let i := 0 } lt(i, nameLength) { i := add(i, 0x20) } {
                mstore(add(strPtr, i), sload(add(dataSlot, div(i, 0x20))))
            }
            
            // Read the uint256 value from storage
            value := sload(valueSlot)
        }

        // Convert the bytes to a string and set the ValueData struct
        _data.name = string(gottonName);
        _data.value = value;

        return _data;
    }
}
```